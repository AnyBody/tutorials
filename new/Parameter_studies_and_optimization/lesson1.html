
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta content="noindex" name="robots" />

<meta property="og:title" content="Defining a Parameter Study" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="https://anyscript.org/Parameter_studies_and_optimization/lesson1.html" />
  
<meta property="og:site_name" content="AnyScript Tutorials" />
  
<meta property="og:description" content="A parameter study is a systematic way to vary several model parameters and have the system automatically run one or several analyses for each combination of parameters. For instance, you may want t..." />
  
<meta property="og:image" content="https://anyscript.org/_images/bike2D.png" />
  
<meta property="og:image:alt" content="AnyScript Tutorials" />
  
    <title>Defining a Parameter Study &#8212; AnyBody Tutorials v7.4.0-dev</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Optimization Studies" href="lesson2.html" />
    <link rel="prev" title="Parameter Studies and Optimization" href="intro.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    <img src="../_static/AnyBodyTutorials2.svg" class="logo__image only-light" alt="Logo image">
    <img src="../_static/AnyBodyTutorials2.svg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../GettingStarted.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../Tutorials.html">
  AnyBody Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../about.html">
  About
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/anybody/anybody-tutorial/" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Core tutorials
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_study_of_studies/index.html">
   A Study of Studies
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_study_of_studies/intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_study_of_studies/lesson1.html">
     Lesson1: Mechanical System Information
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_study_of_studies/lesson2.html">
     Lesson2: Initial Conditions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_study_of_studies/lesson3.html">
     Lesson 3: Kinematic Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_study_of_studies/lesson4.html">
     Lesson 4: Inverse Dynamics
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Making_things_move/index.html">
   Making things move
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Making_things_move/intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Making_things_move/lesson1.html">
     Lesson1: Simple drivers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Making_things_move/lesson2.html">
     Lesson 2: Using motion capture data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Making_things_move/lesson3.html">
     Lesson3: Noise and filters
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Making_things_move/lesson4.html">
     Lesson 4: Parameter identification
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Making_things_move/lesson5.html">
     Lesson 5: Using real data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Making_things_move/lesson6.html">
     Lesson 6: Troubleshooting C3D files
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../MuscleRecruitment/index.html">
   Inverse Dynamics of Muscle Systems
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../MuscleRecruitment/Inverse_dynamics.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MuscleRecruitment/lesson1.html">
     Lesson 1: The Basics of Muscle Recruitment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MuscleRecruitment/lesson2.html">
     Lesson 2: Linear Muscle Recruitment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MuscleRecruitment/lesson3.html">
     Lesson 3: Quadratic Muscle Recruitment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MuscleRecruitment/lesson4.html">
     Lesson 4: Polynomial Muscle Recruitment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MuscleRecruitment/lesson5.html">
     Lesson 5: Min/Max Muscle Recruitment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MuscleRecruitment/lesson6.html">
     Lesson 6: Composite Recruitment Criteria
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../MuscleRecruitment/lesson_calibration.html">
     Lesson 7: Calibration
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Muscle_modeling/index.html">
   Muscle Modeling
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/lesson1.html">
     Lesson 1: The Basics of Muscle Definition
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/lesson2.html">
     Lesson 2: Controlling Muscle Drawing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/lesson3.html">
     Lesson 3: Via-point Muscles
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/lesson4.html">
     Lesson 4: Wrapping Muscles
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/lesson5.html">
     Lesson 5: Muscle Models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/lesson6.html">
     Lesson 6: General Muscles
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/lesson7.html">
     Lesson 7: Ligaments
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../The_mechanical_elements/index.html">
   The Mechanical Elements
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../The_mechanical_elements/intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../The_mechanical_elements/lesson1.html">
     Lesson 1: Segments
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../The_mechanical_elements/lesson2.html">
     Lesson 2: Joints
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../The_mechanical_elements/lesson3.html">
     Lesson 3: Drivers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../The_mechanical_elements/lesson4.html">
     Lesson 4: Kinematic Measures
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../The_mechanical_elements/lesson5.html">
     Lesson 5: Forces
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ForceDependentKinematics/index.html">
   Force-Dependent Kinematics
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ForceDependentKinematics/fdk.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ForceDependentKinematics/lesson1.html">
     Lesson 1: The Baseline Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ForceDependentKinematics/lesson2.html">
     Lesson 2: Adding FDK Features
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ForceDependentKinematics/lesson3.html">
     Lesson 3: Results of FDK
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ForceDependentKinematics/lesson4.html">
     Lesson 4: Using Surfaces to Define the Knee Joint
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ForceDependentKinematics/lesson5.html">
     Lesson 5: Using Contact Forces to Replace a Joint in a Human Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ForceDependentKinematics/fdkappendix.html">
     FDK appendix
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Parameter Studies and Optimization
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Defining a Parameter Study
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lesson2.html">
     Optimization Studies
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lesson3.html">
     Optimization Studies in Python
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Special topics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Finite_element_analysis/index.html">
   Finite Element Analysis Interfacing
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finite_element_analysis/lesson1.html">
     Lesson 1: Export of data for FEA
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finite_element_analysis/lesson2.html">
     Lesson 2: ANSYS Interface
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finite_element_analysis/lesson3.html">
     Lesson 3: Abaqus Interface
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../AnyExp4SOLIDWORKS/index.html">
   Making Models using SOLIDWORKS
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../AnyExp4SOLIDWORKS/lesson1.html">
     Translating a SOLIDWORKS CAD model to AnyBody
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../AnyExp4SOLIDWORKS/lesson2.html">
     Making the translated AnyScript model move
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../AnyExp4SOLIDWORKS/lesson3.html">
     Creating human-machine integrated analysis model
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Scaling/index.html">
   Scaling and Personalizing your model
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../Scaling/lesson3.html">
     Lesson 1: Scaling based on medical images
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
    <label for="toctree-checkbox-11">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../Scaling/lesson3_appendix.html">
       Lesson 1 appendix
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Scaling/lesson4.html">
     Lesson 2: Including a custom scaling function into your model
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Posture_and_movement/intro.html">
   Posture and Movement Prediction
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Internals of AnyBody
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Interface_features/index.html">
   User interface features
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/lesson1.html">
     Lesson 1: The Editor Window
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/lesson2.html">
     Lesson 2: The Model View Window
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/lesson3.html">
     Lesson 3: The Chart View
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/lesson4.html">
     Lesson 4: The Model Tree and Object Description
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/lesson5.html">
     Lesson 5: The Command Line Application
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/lesson6.html">
     Lesson 6: Modifying the Loaded Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/lesson7.html">
     Lesson 7: Wrapping the Model with AnyBody Project
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Advanced_script_features/index.html">
   Advanced Script Features
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Advanced_script_features/lesson1.html">
     Lesson 1: Using References
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Advanced_script_features/lesson2.html">
     Lesson 2: Using Include Files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Advanced_script_features/lesson3.html">
     Lesson 3: Mathematical Expressions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Troubleshooting_anyscript/intro.html">
   Trouble Shooting AnyScript Models
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Validation_of_models/index.html">
   Validation of Models
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Validation_of_models/intro.html">
     Introduction to validation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Validation_of_models/Kinematic_input.html">
     Validating Kinematic input
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#some-general-terminology">
   Some General Terminology
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#definition-of-a-parameter-study">
   Definition of a Parameter Study
  </a>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      

<div class="tocsection editthispage">
    <a href="https://github.com/anybody/anybody-tutorial/edit/master/./Parameter_studies_and_optimization/lesson1.md">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section class="tex2jax_ignore mathjax_ignore" id="defining-a-parameter-study">
<h1>Defining a Parameter Study<a class="headerlink" href="#defining-a-parameter-study" title="Permalink to this headline">#</a></h1>
<p>A parameter study is a systematic way to vary several model
parameters and have the system automatically run one or several analyses
for each combination of parameters.</p>
<p>For instance, you may want to know how the forces affecting a joint
prosthesis depend on the implanted position. Or you may be interested in
finding the standing posture by which you can hold a heavy box as easily
as possible between your hands. Or how the position of a handle
influences the muscular effort of operating it.</p>
<p>Or you may be interested in knowing how the seat height and horizontal
position influence the muscle effort and metabolism of the rider. This
is precisely what we shall do in this tutorial. To make life a bit
easier for you, we have prepared a bicycle model you can download and
play around with. <a class="reference download internal" download="" href="../_downloads/3baef19de9a426654b0f02de41b18722/OptimBike2.zip"><code class="xref download docutils literal notranslate"><span class="pre">Please</span> <span class="pre">click</span> <span class="pre">here</span> <span class="pre">to</span> <span class="pre">download</span> <span class="pre">the</span> <span class="pre">zip</span> <span class="pre">fileOptimBike.zip</span></code></a> and unpack it to some
pertinent place on your hard disk.</p>
<p>The bicycle model is pretty much the <a class="reference external" href="https://anyscript.org/ammr-doc/beta/auto_examples/Sports/plot_BikeModel2D.html#sphx-glr-auto-examples-sports-plot-bikemodel2d-py" title="(in AMMR v2.4)"><span class="xref std std-ref">2D Bike</span></a> that you may know from the
<a class="reference external" href="https://anyscript.org/ammr-doc/beta/index.html" title="(in AMMR v2.4)"><span class="xref std std-doc">AnyBody Managed Model Repository</span></a>.</p>
<img alt="../_images/bike2D.png" src="../_images/bike2D.png" />
<p>As you can see the model is very simple. It has two legs and a pelvis
that is rigidly fixed to the seat. The feet are attached to the crank
mechanism, and the crank is loaded by a sinusoidal torque and constant
angular velocity producing a mean mechanical output of 165 W. It has a
total of 18 muscles - nine on each leg. You can control the
design parameters of the bicycle and the way the rider propels the
pedals by means of the variables at the top of the main file. It might
be a good idea to play a bit around with the variables and run some
analyses. Try, for instance, to raise and lower the seat. Notice that if
you raise the seat more than a few centimeters, the model has trouble
reaching the pedals. This is really a kinematical problem, but it causes
momentarily very high muscle activities and, if you raise the seat
further, makes the kinematical analysis break down because the feet lose
the contact with the pedals.</p>
<p>The crank torque profile of a bicycle rider changes when the set is
moved horizontally because the location of the cycle’s dead center
changes. To account for this, a special feature has been set up in this
model to adjust the phase shift of the crank torque profile to the seat
position such that the minimum crank torque occurs when the pedals point
towards the hip joint regardless of where the saddle is positioned.</p>
<section id="some-general-terminology">
<h2>Some General Terminology<a class="headerlink" href="#some-general-terminology" title="Permalink to this headline">#</a></h2>
<p>Before we proceed with the definition of a parameter study it might be
useful to introduce the terminology used by AnyBody for parameter and
optimization studies:</p>
<ul class="simple">
<li><p>A design variable is an independent parameter controlling some aspect
of the model, for instance the seat height, the pedal length, the
pelvic angle, the crank torque variation, the cadence, the strength
of a muscle, and so on. In short, just about any property you can set
in the AnyScript model. A design variable is always a single number
and it must be associated with upper and lower variation limits, but
it is allowed to construct the model such that many properties depend
on each variable. For instance, you might want to define a variable
controlling the soleus muscle strength and then let the soleus muscle
in both legs depend on it. In this way you can distinguish between
dependent and independent parameters, and only independent parameters
can be used as design variables. The AnyScript class defining a
design variable is called <code class="docutils literal notranslate"><span class="pre">AnyDesVar</span></code>.</p></li>
<li><p>A design measure is a dependent parameter that results from an
analysis with given values of design variables. Typical examples
would be the maximum muscle activity, the metabolism, the mechanical
work, the mechanical power generated by a specific muscle, or the
force in a joint. The AnyScript class for definition of design
measures is the <code class="docutils literal notranslate"><span class="pre">AnyDesMeasure</span></code>.</p></li>
</ul>
<p>These two classes are common to parameter studies and optimization
studies, so the two types obviously share several concepts. Let us
proceed with the definition of a parameter study. Actually, both these
studies come from the same family of classes having the <code class="docutils literal notranslate"><span class="pre">AnyDesStudy</span></code> as
common parent; we commonly refer to these studies as design studies.
Within this kinship, they also share the definition of the “analysis” to
be performed when evaluating the design measures for a certain set of
design variables. The “analysis” is in fact an AnyScript operation
(<code class="docutils literal notranslate"><span class="pre">AnyOperation</span></code>), called Analysis, which is a member of all design
studies. To state an optimization or a parameter study properly, the
design variables, the design measures, and the analysis must all be
defined.</p>
</section>
<section id="definition-of-a-parameter-study">
<h2>Definition of a Parameter Study<a class="headerlink" href="#definition-of-a-parameter-study" title="Permalink to this headline">#</a></h2>
<img alt="../_images/class_insert.png" src="../_images/class_insert.png" />
<p>A parameter study is as the name indicates a study. Therefore its
natural position in the model is below the existing <code class="docutils literal notranslate"><span class="pre">AnyBodyStudy</span></code>. We can
insert a new parameter study by means of the object inserter mechanism
from the class tree. Place the cursor below the definition of the
<code class="docutils literal notranslate"><span class="pre">AnyBodyStudy</span></code> Study, click the Classes tab in the tree view, locate the
AnyParamStudy, right-click, and insert a template of the class. You
should get the following result:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyBodyStudy</span> <span class="n">Study</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">Model</span> <span class="o">=</span> <span class="p">.</span><span class="n">Model</span><span class="p">;</span>


  <span class="n">Gravity</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">};</span>
  <span class="n">tEnd</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">BikeParameters</span><span class="p">.</span><span class="n">T</span><span class="p">;</span>
<span class="p">};</span>

<span class="gr">AnyParamStudy &lt;ObjectName&gt; =</span>
<span class="gr">{</span>
<span class="gr">  //LogFile = ;</span>
<span class="gr">  /*Analysis =</span>
<span class="gr">  {</span>
<span class="gr">  Settings =</span>
<span class="gr">  {</span>
<span class="gr">  Echo = On;</span>
<span class="gr">  ModelSceneUpdate = On;</span>
<span class="gr">  };</span>
<span class="gr">  //AnyOperation &amp;&lt;Insert name0&gt; = &lt;Insert object reference (or full object definition)&gt;; You can make any number of these objects!</span>
<span class="gr">  };*/</span>
<span class="gr">  nStep = ;</span>
<span class="gr">  AnyDesVar &amp;&lt;Insert name0&gt; = &lt;Insert object reference (or full object definition)&gt;;</span>
<span class="gr">  //AnyDesVar &amp;&lt;Insert name1&gt; = &lt;Insert object reference (or full object definition)&gt;; You can make any number of these objects!</span>
<span class="gr">  AnyDesMeasure &amp;&lt;Insert name0&gt; = &lt;Insert object reference (or full object definition)&gt;;</span>
<span class="gr">  //AnyDesMeasure &amp;&lt;Insert name1&gt; = &lt;Insert object reference (or full object definition)&gt;; You can make any number of these objects!</span>
<span class="gr">};</span>
</pre></div>
</div>
<p> As you can see, this requires a bit of additional specifications and
general tidying up:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyParamStudy</span> <span class="gr">ParamStudy</span> <span class="o">=</span>
<span class="p">{</span>
  <span class="n">Analysis</span> <span class="o">=</span>
  <span class="p">{</span>
  <span class="c1">//AnyOperation &amp;&lt;Insert name0&gt; = &lt;Insert object reference (or full object definition)&gt;; You can make any number of these objects!</span>
  <span class="p">};</span>
  <span class="n">nStep</span> <span class="o">=</span> <span class="p">;</span>
  <span class="kt">AnyDesVar</span> <span class="o">&amp;&lt;</span><span class="n">Insert</span> <span class="n">name0</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Insert</span> <span class="n">object</span> <span class="n">reference</span> <span class="p">(</span><span class="n">or</span> <span class="n">full</span> <span class="n">object</span> <span class="n">definition</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="kt">AnyDesVar</span> <span class="o">&amp;&lt;</span><span class="n">Insert</span> <span class="n">name1</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Insert</span> <span class="n">object</span> <span class="n">reference</span> <span class="p">(</span><span class="n">or</span> <span class="n">full</span> <span class="n">object</span> <span class="n">definition</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span> <span class="n">You</span> <span class="n">can</span> <span class="n">make</span> <span class="n">any</span> <span class="n">number</span> <span class="n">of</span> <span class="n">these</span> <span class="n">objects</span><span class="o">!</span>
  <span class="kt">AnyDesMeasure</span> <span class="o">&amp;&lt;</span><span class="n">Insert</span> <span class="n">name0</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Insert</span> <span class="n">object</span> <span class="n">reference</span> <span class="p">(</span><span class="n">or</span> <span class="n">full</span> <span class="n">object</span> <span class="n">definition</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="c1">//AnyDesMeasure &amp;&lt;Insert name1&gt; = &lt;Insert object reference (or full object definition)&gt;; You can make any number of these objects!</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Here’s a brief explanation of the different components of a parameter
study:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Parameter</strong></p></th>
<th class="head"><p><strong>Function</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Analysis</span></code></p></td>
<td><p>This is a specification of the operation(s) to perform to provide the data we are studying in the parameter study. This will typically be an InverseDynamicAnalysis operation, but it could also be simply an evaluation of some mathematical expression, or it could be a combination of multiple operations, for instance various calibrations followed by an inverse dynamic analysis.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">nStep</span></code></p></td>
<td><p>This is a specification of how many steps to evaluate in the parameter study for each parameter.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AnyDesVar</span></code></p></td>
<td><p>The study must declare at least one of these. It is the parameter(s) that are varied in the study and for combinations of which the model is analyzed. You can define as many as you like, but please beware that the number of analyses in the parameter study is the product of steps for each AnyDesVar, so the time consumption grows exponentially with the number of AnyDesVars.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">AnyDesMeasure</span></code></p></td>
<td><p>Each of these objects specifies a property that is the result of the analysis and which must be collected for further inspection as the study proceeds. You can define as many of these as you like.</p></td>
</tr>
</tbody>
</table>
<p>Let us insert the necessary specifications to perform a parameter study
on the saddle position of the bicycle:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyParamStudy</span> <span class="n">ParamStudy</span> <span class="o">=</span>
<span class="p">{</span>
  <span class="n">Analysis</span> <span class="o">=</span> <span class="p">{</span>
   <span class="gr">AnyOperation &amp;Operation = ..Study.InverseDynamics;</span>
  <span class="p">};</span>
</pre></div>
</div>
<p>As you can see, this is a pointer to the inverse dynamic analysis of the
existing AnyBodyStudy in the bicycle model. This specification simply
means that to evaluate the parameters we want to investigate in this
parameter study, we must execute the analysis of the bicycle. This may
seem obvious in a simple model like this one, but many AnyScript models
contain multiple studies and each study contains multiple operations.</p>
<p>The next specification deals with the parameters to vary:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyParamStudy</span> <span class="n">ParamStudy</span> <span class="o">=</span>
<span class="p">{</span>
  <span class="n">Analysis</span> <span class="o">=</span> <span class="p">{</span>
   <span class="kt">AnyOperation</span> <span class="o">&amp;</span><span class="n">Operation</span> <span class="o">=</span> <span class="p">..</span><span class="n">Study</span><span class="p">.</span><span class="n">InverseDynamics</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="n">nStep</span> <span class="o">=</span> <span class="p">;</span>
  <span class="kt">AnyDesVar</span> <span class="gr">SaddleHeight = {</span>
<span class="gr">    Val = Main.BikeParameters.SaddleHeight;</span>
<span class="gr">    Min = 0.61;</span>
<span class="gr">    Max = 0.69;</span>
<span class="gr">  };</span>
  <span class="kt">AnyDesVar</span> <span class="gr">SaddlePos = {</span>
<span class="gr">    Val = Main.BikeParameters.SaddlePos;</span>
<span class="gr">    Min = -0.22;</span>
<span class="gr">    Max = -0.05;</span>
<span class="gr">  };</span>
  <span class="kt">AnyDesMeasure</span> <span class="o">&amp;&lt;</span><span class="n">Insert</span> <span class="n">name0</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Insert</span> <span class="n">object</span> <span class="n">reference</span> <span class="p">(</span><span class="n">or</span> <span class="n">full</span> <span class="n">object</span> <span class="n">definition</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
  <span class="c1">//AnyDesMeasure &amp;&lt;Insert name1&gt; = &lt;Insert object reference (or full object definition)&gt;; You can make any number of these objects!</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Please notice here that we have removed the ‘&amp;’s that were inserted in
the template in front of the variable names. Instead of pointing at
<code class="docutils literal notranslate"><span class="pre">AnyDesVar</span></code>s defined elsewhere we include the entire definition right here
in the study, and this is actually the usual way to do it.</p>
<p>Each <code class="docutils literal notranslate"><span class="pre">AnyDesVar</span></code> gets three properties set. The first one is called <code class="docutils literal notranslate"><span class="pre">Val</span></code> and
is simply set equal to an existing parameter in the model. The best way
to understand this statement is to think of <code class="docutils literal notranslate"><span class="pre">Val</span></code> as a reference variable
that is equalized in the first case with the SaddleHeight, which is a
parameter defined at the top of the main file. At any time in the
parameter study, <code class="docutils literal notranslate"><span class="pre">Val</span></code> will be equal to the saddle height as one should
expect from the assignment. But in this special case, the assignment
also goes the other way: It lets the parameter study control the value
of what is on the right hand side of the equality sign, in this case the
SaddleHeight parameter. We have similarly defined a second parameter,
SaddlePos, which allows the parameter study to vary the
horizontal saddle position. This two-way linkage between <code class="docutils literal notranslate"><span class="pre">Val</span></code> and another
variable in the model implies certain restrictions on what assignments
AnyScript allows for this particular case. The referred variable must be
a scalar quantity, i.e. either a scalar or an element of a larger
structure (e.g. vector or matrix). Secondly, it must be an independent
scalar quantity, i.e., it cannot depend (by expressions) on other
variables; otherwise there would exist an ambiguity.</p>
<p>The next step is to define the properties we wish to study, i.e. the
dependent parameters or “design measures” of the model. As you know,
after running an operation from a study the results are available in the
Output branch of the tree view of the operation and they can be plotted,
dumped and copied to the clipboard and so on. Now we are defining a
study that will execute operations from other studies and assemble the
results for later investigation. We might even want to make mathematical
operations on these results, combine results from different operations,
and so on. To do this we must refer to the result we wish to store for
further processing. There is just one semantic problem: The results do
not exist until we have performed the analysis, but we must refer to
them already when we author (and load) the model.</p>
<p>To solve this problem we must go back to the <code class="docutils literal notranslate"><span class="pre">AnyBodyStudy</span></code> Study, from
where we want to lift the results, and declare an object that will allow
us to refer to computational results before they are actually made. The
object is of class <code class="docutils literal notranslate"><span class="pre">AnyOutputFun</span></code>, and we shall add it to the existing
<code class="docutils literal notranslate"><span class="pre">AnyBodyStudy</span></code>:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyBodyStudy</span> <span class="n">Study</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">Model</span> <span class="o">=</span> <span class="p">.</span><span class="n">Model</span><span class="p">;</span>

  <span class="n">Gravity</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">};</span>
  <span class="n">tEnd</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">BikeParameters</span><span class="p">.</span><span class="n">T</span><span class="p">;</span>
  <span class="gr">AnyOutputFun MaxAct = {</span>
<span class="gr">     Val = .MaxMuscleActivity;</span>
<span class="gr">  };</span>
<span class="p">};</span>
</pre></div>
</div>
<p>This allows us to refer to <code class="docutils literal notranslate"><span class="pre">Study.Output.MaxMuscleActivity</span></code> before it
actually gets created.</p>
<p><code class="docutils literal notranslate"><span class="pre">AnyOutputFun</span></code> is actually a class of mathematical function that returns
the output (when existing) associated with the <code class="docutils literal notranslate"><span class="pre">Val</span></code> member. So here we
have created a function called <code class="docutils literal notranslate"><span class="pre">MaxAct</span></code> that takes no arguments and
returns the output data for <code class="docutils literal notranslate"><span class="pre">.MaxMuscleActivity</span></code>. Notice that <code class="docutils literal notranslate"><span class="pre">AnyOutputFun</span></code>
must be declared inside a study in order to resolve the association with
the output data structure of the particular study.</p>
<p>We can now use the output function, <code class="docutils literal notranslate"><span class="pre">MaxAct()</span></code>, in our design measure simply
by calling the function in the assignment of the <code class="docutils literal notranslate"><span class="pre">Val</span></code> member of the
<code class="docutils literal notranslate"><span class="pre">AnyDesMeasure</span></code>:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyDesVar</span> <span class="n">SaddlePos</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">Val</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">BikeParameters</span><span class="p">.</span><span class="n">SaddlePos</span><span class="p">;</span>
    <span class="n">Min</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.22</span><span class="p">;</span>
    <span class="n">Max</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">;</span>
<span class="p">};</span>
<span class="gr">AnyDesMeasure MaxAct = {</span>
<span class="gr"> Val = max(..Study.MaxAct());</span>
<span class="gr">};</span>
</pre></div>
</div>
<p>Notice the definition. The <code class="docutils literal notranslate"><span class="pre">MaxAct</span></code> function for each
<code class="docutils literal notranslate"><span class="pre">InverseDynamics</span></code> operation returns a vector of maximum muscle
activities in the model. The vector has as many components as the study
has time steps, i.e. 50 in the present case. In the definition of the
<code class="docutils literal notranslate"><span class="pre">AnyDesMeasure</span></code> we want to save only the largest value of each of the
vector, so we wrap the call of the <code class="docutils literal notranslate"><span class="pre">MaxAct</span></code> function in another <code class="docutils literal notranslate"><span class="pre">max()</span></code>
function. AnyScript gives you a number of such data processing functions
and we shall study others further down. Please refer to the reference
manual for further details.</p>
<p>One thing is missing before we can try the whole thing out: We must
specify how many steps we want the parameter study to perform for each
parameter. As in AnyBodyStudies this is done by the <code class="docutils literal notranslate"><span class="pre">nStep</span></code> variable, but
where <code class="docutils literal notranslate"><span class="pre">nStep</span></code> in an <code class="docutils literal notranslate"><span class="pre">AnyBodyStudy</span></code> is an integer variable, it is a vector
with one component for each <code class="docutils literal notranslate"><span class="pre">AnyDesVar</span></code> in an <code class="docutils literal notranslate"><span class="pre">AnyParamStudy</span></code>. We shall be
modest at first and choose only five steps in each direction. And so,
the final <code class="docutils literal notranslate"><span class="pre">AnyParamStudy</span></code> looks like this:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyParamStudy</span> <span class="n">ParamStudy</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">Analysis</span> <span class="o">=</span> <span class="p">{</span>
    <span class="kt">AnyOperation</span> <span class="o">&amp;</span><span class="n">Operation</span> <span class="o">=</span> <span class="p">..</span><span class="n">Study</span><span class="p">.</span><span class="n">InverseDynamics</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="gr">nStep = {5,5};</span>
  <span class="kt">AnyDesVar</span> <span class="n">SaddleHeight</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">Val</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">BikeParameters</span><span class="p">.</span><span class="n">SaddleHeight</span><span class="p">;</span>
      <span class="n">Min</span> <span class="o">=</span> <span class="mf">0.61</span><span class="p">;</span>
      <span class="n">Max</span> <span class="o">=</span> <span class="mf">0.69</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kt">AnyDesVar</span> <span class="n">SaddlePos</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">Val</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">BikeParameters</span><span class="p">.</span><span class="n">SaddlePos</span><span class="p">;</span>
      <span class="n">Min</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.22</span><span class="p">;</span>
      <span class="n">Max</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kt">AnyDesMeasure</span> <span class="n">MaxAct</span> <span class="o">=</span> <span class="p">{</span>
   <span class="n">Val</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(..</span><span class="n">Study</span><span class="p">.</span><span class="n">MaxAct</span><span class="p">());</span>
  <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>It is finally time try it out. If you have typed everything correctly,
then you should be able to load the model. Then find the <code class="docutils literal notranslate"><span class="pre">Main.ParamStudy.ParameterStudy</span></code> opertion in
the operation dropdown:</p>
<img alt="../_images/operation_select.png" src="../_images/operation_select.png" />
<p>Make sure you have a Model View window open. With the ParameterStudy select in
the operation drop-down click the “Run” botton. You should see the model starting to
cycle, and if you watch the vicinity of the saddle carefully, you will
see that the hip joint is changing its position on a 5 x 5 grid. With a
reasonably fast computer it should take a minute or less to do the 25
analyses after which the computations stop.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you turn off the model view, the computation should speed up.</p>
<p>Congratulations! You have completed your first parameter study. Let us
investigate the result.</p>
</div>
<p>The obvious way to visualize the results of a study with two parameters
is as a 3-D surface. The chart view in AnyBody can also do that.</p>
<img alt="../_images/anychart1.png" src="../_images/anychart1.png" />
<p>The toolbar of this window indicates a kinship with the Model View
window. Indeed, if you select the rotation button in the toolbar and
drag the mouse with the left button down inside the coordinate system
you will notice that the system rotates just like an ordinary Model
View. Now, expand the <code class="docutils literal notranslate"><span class="pre">Model</span></code> node in the tree until you can click the
ParamStudy-&gt;Output-&gt;MaxAct-&gt;Val property. The coordinate system
automatically attains a second abscissa axis and you can see a nice
surface like this:</p>
<img alt="../_images/anychart2.png" src="../_images/anychart2.png" />
<p>The surface shows the maximum muscle activity over the cycle for each of
the 25 combinations of parameters and provides a very nice overview of
the behavior of the model. The surface reveals that the highest and most
backward position is the best. Why not try higher and more backward,
then? It is very simply to do:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyDesVar</span> <span class="n">SaddleHeight</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">Val</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">BikeParameters</span><span class="p">.</span><span class="n">SaddleHeight</span><span class="p">;</span>
    <span class="n">Min</span> <span class="o">=</span> <span class="mf">0.61</span><span class="p">;</span>
    <span class="n">Max</span> <span class="o">=</span> <span class="mf">0.69</span> <span class="gr">+ 0.02</span><span class="p">;</span>
<span class="p">};</span>
<span class="kt">AnyDesVar</span> <span class="n">SaddlePos</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">Val</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">BikeParameters</span><span class="p">.</span><span class="n">SaddlePos</span><span class="p">;</span>
    <span class="n">Min</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.22</span> <span class="gr">-0.03</span><span class="p">;</span>
    <span class="n">Max</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>When you re-run the parameter study, things will go well in the
beginning, but towards the end of the 25 combinations you may notice
muscles beginning to bulge more and momentarily attain the color
of magenta. This is the system’s way of demonstrating that the muscles
have been loaded above 100% of their strength. The reason why this
happens is that, as the seat rises, the model gets into positions where
it is difficult for the feet to reach the pedals. Just before the feet
cannot reach the pedals the knee movements are accelerated causing large
inertia forces in the system. All this happens a bit more drastically in
an ideal rigid body model than it would in real life where joints have a
bit of slack, segments are slightly elastic, and the prescribed
kinematics may be compromised. You can see very clearly what happens if
you go back to the AnyChart View and study the new surface:</p>
<img alt="../_images/anychart3.png" src="../_images/anychart3.png" />
<p>The surface is now completely dominated by the one combination, which is
difficult for the model to do. You can still see the surface shape if
you change the scale of the value axis. This and all other settings are
available if you click
the <img alt="chartsettings.png" src="../_images/chartsettings.png" />
button in the toolbar. Doing so will produce a window with a tree view
in which you can select <code class="docutils literal notranslate"><span class="pre">ValueAxis</span></code>-&gt;``Max``. Try setting Max to 0.25 and you
should obtain the following:</p>
<img alt="../_images/anychart4.png" src="../_images/anychart4.png" />
<p>What this study reveals is that in terms of muscle activity to drive the
bicycle a high seat is advantageous, but there seems to be a very sharp
limit where the leg gets close to not being able to reach the pedals,
and this should not be exceeded. One additional remark in this context
is that this bicycle model has a predefined ankle angle variation
whereas a real human can compensate for a higher seat by letting the
ankle operate in a more plantar-flexed position.</p>
<p>Before we finish this section, let us take a look at a particularly
important feature of AnyScript mathematics: The ability to compute
integral properties. AnyBody has a simple way of approximating the
metabolism of muscles based on the simulation of each muscle’s
mechanical work. Metabolism is technically a power measured in Watt, and
the sum of the individual muscle metabolisms will give us an estimate of
the total metabolism involved in the bicycling process. It is fairly
simple to add up the muscle metabolisms in the AnyBody study:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="c1">/// The study: Operations to be performed on the model</span>
<span class="kt">AnyBodyStudy</span> <span class="n">Study</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">Model</span> <span class="o">=</span> <span class="p">.</span><span class="n">Model</span><span class="p">;</span>
  <span class="n">nStep</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>

  <span class="n">Gravity</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">};</span>
  <span class="n">tEnd</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">BikeParameters</span><span class="p">.</span><span class="n">T</span><span class="p">;</span>

  <span class="gr">// Useful variables for the optimization</span>
<span class="gr">  AnyFolder &amp;r = Main.Model.Leg2D.Right.Mus;</span>
<span class="gr">  AnyFolder &amp;l = Main.Model.Leg2D.Left.Mus;</span>
<span class="gr">  AnyVar Pmet_total = r.Ham.Pmet+r.BiFemSh.Pmet+r.GlutMax.Pmet+r.RectFem.Pmet+r.Vasti.Pmet+r.Gas.Pmet+r.Sol.Pmet+r.TibAnt.Pmet+l.Ham.Pmet+l.BiFemSh.Pmet+l.GlutMax.Pmet+l.RectFem.Pmet+l.Vasti.Pmet+l.Gas.Pmet+l.Sol.Pmet+l.TibAnt.Pmet;</span>
<span class="gr">  </span>

  <span class="kt">AnyOutputFun</span> <span class="n">MaxAct</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">Val</span> <span class="o">=</span> <span class="p">.</span><span class="n">MaxMuscleActivity</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Notice that we have defined the <code class="docutils literal notranslate"><span class="pre">r</span></code> and <code class="docutils literal notranslate"><span class="pre">l</span></code> variables for convenience to
limit the size of the expressions. If you run the InverseDynamics Analysis
(go on and try!) you will find the new variable mentioned in the list of
output, and you can view it in the chart view.</p>
<img alt="../_images/metabolism_curve.png" src="../_images/metabolism_curve.png" />
<p>The area under this curve is the total metabolism combusted over a crank
revolution. To compute this we must introduce two more elements. The
first one is an <code class="docutils literal notranslate"><span class="pre">AnyOutputFun</span></code> as we have seen it before. The purpose of
this function is to make it semantically possible to refer to the output
of the <code class="docutils literal notranslate"><span class="pre">Pmet_total</span></code> variable before is has actually been computed:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span>  <span class="c1">// Useful variables for the optimization</span>
  <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">r</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">Model</span><span class="p">.</span><span class="n">Leg2D</span><span class="p">.</span><span class="n">Right</span><span class="p">.</span><span class="n">Mus</span><span class="p">;</span>
  <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">l</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">Model</span><span class="p">.</span><span class="n">Leg2D</span><span class="p">.</span><span class="n">Left</span><span class="p">.</span><span class="n">Mus</span><span class="p">;</span>
  <span class="kt">AnyVar</span> <span class="n">Pmet_total</span> <span class="o">=</span> <span class="n">r</span><span class="p">.</span><span class="n">Ham</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">r</span><span class="p">.</span><span class="n">BiFemSh</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">r</span><span class="p">.</span><span class="n">GlutMax</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">r</span><span class="p">.</span><span class="n">RectFem</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">r</span><span class="p">.</span><span class="n">Vasti</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">r</span><span class="p">.</span><span class="n">Gas</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">r</span><span class="p">.</span><span class="n">Sol</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">r</span><span class="p">.</span><span class="n">TibAnt</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">l</span><span class="p">.</span><span class="n">Ham</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">l</span><span class="p">.</span><span class="n">BiFemSh</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">l</span><span class="p">.</span><span class="n">GlutMax</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">l</span><span class="p">.</span><span class="n">RectFem</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">l</span><span class="p">.</span><span class="n">Vasti</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">l</span><span class="p">.</span><span class="n">Gas</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">l</span><span class="p">.</span><span class="n">Sol</span><span class="p">.</span><span class="n">Pmet</span><span class="o">+</span><span class="n">l</span><span class="p">.</span><span class="n">TibAnt</span><span class="p">.</span><span class="n">Pmet</span><span class="p">;</span>

  <span class="kt">AnyOutputFun</span> <span class="n">MaxAct</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">Val</span> <span class="o">=</span> <span class="p">.</span><span class="n">MaxMuscleActivity</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="gr">AnyOutputFun Metabolism = {</span>
<span class="gr">    Val = .Pmet_total;</span>
<span class="gr">  };</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The second missing element is the actual integration of the function.
This we perform in the parameter study where we define the
AnyDesMeasure:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyParamStudy</span> <span class="n">ParamStudy</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">Analysis</span> <span class="o">=</span> <span class="p">{</span>
    <span class="kt">AnyOperation</span> <span class="o">&amp;</span><span class="n">Operation</span> <span class="o">=</span> <span class="p">..</span><span class="n">Study</span><span class="p">.</span><span class="n">InverseDynamics</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="n">nStep</span> <span class="o">=</span> <span class="p">{</span><span class="gr">10</span><span class="p">,</span><span class="gr">10</span><span class="p">};</span>
  <span class="kt">AnyDesVar</span> <span class="n">SaddleHeight</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">Val</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">BikeParameters</span><span class="p">.</span><span class="n">SaddleHeight</span><span class="p">;</span>
      <span class="n">Min</span> <span class="o">=</span> <span class="mf">0.61</span><span class="p">;</span>
      <span class="n">Max</span> <span class="o">=</span> <span class="mf">0.69</span> <span class="gr">/*+ 0.02*/</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kt">AnyDesVar</span> <span class="n">SaddlePos</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">Val</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">BikeParameters</span><span class="p">.</span><span class="n">SaddlePos</span><span class="p">;</span>
      <span class="n">Min</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.22</span> <span class="gr">/*-0.03*/</span><span class="p">;</span>
      <span class="n">Max</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.05</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kt">AnyDesMeasure</span> <span class="n">MaxAct</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">Val</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(..</span><span class="n">Study</span><span class="p">.</span><span class="n">MaxAct</span><span class="p">());</span>
  <span class="p">};</span>
  <span class="gr">AnyDesMeasure Metab = {</span>
<span class="gr">    Val = secint(..Study.Metabolism(),..Study.tArray);</span>
<span class="gr">  };</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The secint function performs a numerical integration of the first
argument against the second argument. Each argument must be an array and
the number of components in the two arguments must be the same.</p>
<p>Notice the other two changes: We have changed the variable limits back
to what they were before and we have decided to be a little more
adventurous and have specified 10 variable steps in each direction. It
is time to run the parameter study again. The new Metab variable is now
available in the list under the <code class="docutils literal notranslate"><span class="pre">ParamStudy</span></code> in the Chart window and
can be plotted:</p>
<img alt="../_images/anychart5.png" src="../_images/anychart5.png" />
<p>We shall return to the capabilities of the Chart view in more detail in
the <a class="reference internal" href="lesson2.html"><span class="doc">next lesson</span></a>, which deals with the
definition of optimization studies.</p>
</section>
</section>


              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="intro.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Parameter Studies and Optimization</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="lesson2.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Optimization Studies</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2022, AnyBody Technology.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta content="noindex" name="robots" />

<meta property="og:title" content="Lesson 7: Calibration" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="https://anyscript.org/MuscleRecruitment/lesson_calibration.html" />
  
<meta property="og:site_name" content="AnyScript Tutorials" />
  
<meta property="og:description" content="One of the challenges in body modeling is that models must be able to change size to reflect individuals of different statures. Even if you are working on a model of a particular individual, you wi..." />
  
<meta property="og:image" content="https://anyscript.org/_images/image133.png" />
  
<meta property="og:image:alt" content="Chart view BicepsLong.Ft" />
  
    <title>Lesson 7: Calibration &#8212; AnyBody Tutorials v7.4.0-dev</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Muscle Modeling" href="../Muscle_modeling/index.html" />
    <link rel="prev" title="Lesson 6: Composite Recruitment Criteria" href="lesson6.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    <img src="../_static/AnyBodyTutorials2.svg" class="logo__image only-light" alt="Logo image">
    <img src="../_static/AnyBodyTutorials2.svg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../GettingStarted.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../Tutorials.html">
  AnyBody Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../about.html">
  About
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/anybody/anybody-tutorial/" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Core tutorials
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_study_of_studies/index.html">
   A Study of Studies
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_study_of_studies/intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_study_of_studies/lesson1.html">
     Lesson1: Mechanical System Information
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_study_of_studies/lesson2.html">
     Lesson2: Initial Conditions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_study_of_studies/lesson3.html">
     Lesson 3: Kinematic Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_study_of_studies/lesson4.html">
     Lesson 4: Inverse Dynamics
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Making_things_move/index.html">
   Making things move
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Making_things_move/intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Making_things_move/lesson1.html">
     Lesson1: Simple drivers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Making_things_move/lesson2.html">
     Lesson 2: Using motion capture data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Making_things_move/lesson3.html">
     Lesson3: Noise and filters
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Making_things_move/lesson4.html">
     Lesson 4: Parameter identification
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Making_things_move/lesson5.html">
     Lesson 5: Using real data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Making_things_move/lesson6.html">
     Lesson 6: Troubleshooting C3D files
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Inverse Dynamics of Muscle Systems
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="Inverse_dynamics.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lesson1.html">
     Lesson 1: The Basics of Muscle Recruitment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lesson2.html">
     Lesson 2: Linear Muscle Recruitment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lesson3.html">
     Lesson 3: Quadratic Muscle Recruitment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lesson4.html">
     Lesson 4: Polynomial Muscle Recruitment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lesson5.html">
     Lesson 5: Min/Max Muscle Recruitment
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lesson6.html">
     Lesson 6: Composite Recruitment Criteria
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Lesson 7: Calibration
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Muscle_modeling/index.html">
   Muscle Modeling
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/lesson1.html">
     Lesson 1: The Basics of Muscle Definition
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/lesson2.html">
     Lesson 2: Controlling Muscle Drawing
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/lesson3.html">
     Lesson 3: Via-point Muscles
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/lesson4.html">
     Lesson 4: Wrapping Muscles
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/lesson5.html">
     Lesson 5: Muscle Models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/lesson6.html">
     Lesson 6: General Muscles
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Muscle_modeling/lesson7.html">
     Lesson 7: Ligaments
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../The_mechanical_elements/index.html">
   The Mechanical Elements
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../The_mechanical_elements/intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../The_mechanical_elements/lesson1.html">
     Lesson 1: Segments
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../The_mechanical_elements/lesson2.html">
     Lesson 2: Joints
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../The_mechanical_elements/lesson3.html">
     Lesson 3: Drivers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../The_mechanical_elements/lesson4.html">
     Lesson 4: Kinematic Measures
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../The_mechanical_elements/lesson5.html">
     Lesson 5: Forces
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../ForceDependentKinematics/index.html">
   Force-Dependent Kinematics
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../ForceDependentKinematics/fdk.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ForceDependentKinematics/lesson1.html">
     Lesson 1: The Baseline Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ForceDependentKinematics/lesson2.html">
     Lesson 2: Adding FDK Features
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ForceDependentKinematics/lesson3.html">
     Lesson 3: Results of FDK
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ForceDependentKinematics/lesson4.html">
     Lesson 4: Using Surfaces to Define the Knee Joint
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ForceDependentKinematics/lesson5.html">
     Lesson 5: Using Contact Forces to Replace a Joint in a Human Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../ForceDependentKinematics/fdkappendix.html">
     FDK appendix
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Parameter_studies_and_optimization/index.html">
   Parameter Studies and Optimization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Parameter_studies_and_optimization/intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Parameter_studies_and_optimization/lesson1.html">
     Defining a Parameter Study
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Parameter_studies_and_optimization/lesson2.html">
     Optimization Studies
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Parameter_studies_and_optimization/lesson3.html">
     Optimization Studies in Python
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Special topics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Finite_element_analysis/index.html">
   Finite Element Analysis Interfacing
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finite_element_analysis/lesson1.html">
     Lesson 1: Export of data for FEA
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finite_element_analysis/lesson2.html">
     Lesson 2: ANSYS Interface
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Finite_element_analysis/lesson3.html">
     Lesson 3: Abaqus Interface
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../AnyExp4SOLIDWORKS/index.html">
   Making Models using SOLIDWORKS
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../AnyExp4SOLIDWORKS/lesson1.html">
     Translating a SOLIDWORKS CAD model to AnyBody
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../AnyExp4SOLIDWORKS/lesson2.html">
     Making the translated AnyScript model move
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../AnyExp4SOLIDWORKS/lesson3.html">
     Creating human-machine integrated analysis model
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Scaling/index.html">
   Scaling and Personalizing your model
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../Scaling/lesson3.html">
     Lesson 1: Scaling based on medical images
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
    <label for="toctree-checkbox-11">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../Scaling/lesson3_appendix.html">
       Lesson 1 appendix
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Scaling/lesson4.html">
     Lesson 2: Including a custom scaling function into your model
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Posture_and_movement/intro.html">
   Posture and Movement Prediction
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Internals of AnyBody
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Interface_features/index.html">
   User interface features
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/lesson1.html">
     Lesson 1: The Editor Window
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/lesson2.html">
     Lesson 2: The Model View Window
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/lesson3.html">
     Lesson 3: The Chart View
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/lesson4.html">
     Lesson 4: The Model Tree and Object Description
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/lesson5.html">
     Lesson 5: The Command Line Application
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/lesson6.html">
     Lesson 6: Modifying the Loaded Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Interface_features/lesson7.html">
     Lesson 7: Wrapping the Model with AnyBody Project
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Advanced_script_features/index.html">
   Advanced Script Features
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Advanced_script_features/lesson1.html">
     Lesson 1: Using References
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Advanced_script_features/lesson2.html">
     Lesson 2: Using Include Files
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Advanced_script_features/lesson3.html">
     Lesson 3: Mathematical Expressions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Troubleshooting_anyscript/intro.html">
   Trouble Shooting AnyScript Models
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../Validation_of_models/index.html">
   Validation of Models
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../Validation_of_models/intro.html">
     Introduction to validation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Validation_of_models/Kinematic_input.html">
     Validating Kinematic input
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      

<nav id="bd-toc-nav">
    
</nav>
    </div>
    
    <div class="toc-item">
      

<div class="tocsection editthispage">
    <a href="https://github.com/anybody/anybody-tutorial/edit/master/./MuscleRecruitment/lesson_calibration.md">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section class="tex2jax_ignore mathjax_ignore" id="lesson-7-calibration">
<h1>Lesson 7: Calibration<a class="headerlink" href="#lesson-7-calibration" title="Permalink to this headline">#</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The following tutorial will explain how to set up your simple
calibration study. Calibration is already built into the AMMR,
<a class="reference external" href="https://anyscript.org/ammr-doc/beta/index.html" title="(in AMMR v2.4)"><span class="xref std std-doc">see the AMMR documentation</span></a> for more details.</p>
</div>
<p>One of the challenges in body modeling is that models must be able to change
size to reflect individuals of different statures. Even if you are working on a
model of a particular individual, you will almost always want to change the
dimensions of the model as you are building it. And if you are developing a
generic model to represent a range of body proportions, you are likely to want
the model to depend on the anthropometrical parameters you define. For instance,
the weight of a segment is often represented as some fraction of the full body
weight. Such a property you could make parametric by simply defining it as a
function of the full body weight by means of a simple formula.</p>
<p>But other dimensions are more subtle and difficult to establish as a
direct functional dependency of other parameters. Tendon lengths are
perhaps the most prominent example. If you are in doubt of the
importance of tendon lengths, just try to bend over and touch your toes
with your knees stretched. Some of us have hamstring tendons that are so
short that we can hardly reach beyond our knees, so tendon lengths
directly limit our ranges of motion. But they also influence the working
conditions of our muscles even when the muscle-tendon unit is not
stretched to its limit, so it is important that we define the muscle
tendon unit so that it fits the body model.</p>
<p>A muscle-tendon unit is attached to at least two segments at its origin
and insertion respectively. To make things worse, some muscles span
several joints, and most muscles wrap over bones and other tissues with
complex geometries on their way from origin to insertion. So, the basic
idea behind calibration of tendon lengths in AnyBody is the assumption
that each muscle-tendon unit has its optimal length at some particular
position of the joints it spans. We simply define one or several studies
that put the body model in these positions and adjust the lengths of the
tendons to give the attached muscles their optimal lengths in those
positions. When you subsequently run an analysis, the system uses the
calibrated tendon lengths regardless of how they are defined in the
AnyScript file. (This means that you have to run the calibration(s)
every time you have reloaded the model if they are to take effect).</p>
<p>AnyBody has several different types of muscle models. Some are very
simple and contain no strength-length relationship, while others do. It
goes almost without saying that the former type is not affected by
calibration. If you use one of the latter - more advanced - models,
however, calibration may be crucial. If the tendon is too long, the
muscle will end up working in an unnaturally contracted state where it
has very little strength. If the tendon is too short, the muscle will be
stretched, and its passive elasticity will affect the force balance in
the system. Since the passive elastic force in a muscle-tendon unit
typically grows very rapidly with stretching, a too short tendon can
cause very large antagonistic muscle actions.</p>
<p>Enough talk! Let’s define a muscle and calibrate it. We shall begin with
the simple arm model we developed in the “Getting Started: AnyScript
Programming” tutorial. If you have not already saved the model in a
file, get it here: <a class="reference download internal" download="" href="../_downloads/e519c5eec189aec55bfb8c224737cbe3/arm2d.any"><code class="xref download docutils literal notranslate"><span class="pre">arm2d.any</span></code></a>.</p>
<p>In that simple example, all the muscles were assumed to be of a simple
type with constant strength. We shall add another and much more detailed
muscle model:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyFolder</span> <span class="n">Muscles</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// Simple muscle model with constant strength = 300 Newton</span>
  <span class="kt">AnyMuscleModel</span> <span class="n">MusMdl</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">F0</span> <span class="o">=</span> <span class="mi">600</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="gr">AnyMuscleModel3E BicepsLongModel = {</span>
<span class="gr">    AnyVar PCSA = 2.66; // Physiological cross sectional area [cm^2]</span>
<span class="gr">    F0 = PCSA*30; // Presuming a maximum muscle stress of 30 N/cm^2</span>
<span class="gr">    Lf0 = 0.123; //Optimum fiber length [m]</span>
<span class="gr">    Lt0 = 0.26; //First guess of tendon slack length [m]</span>
<span class="gr">    Gamma0 = 0.3*(pi/180); //Pennation angle converted to radians</span>
<span class="gr">    Epsilon0 = 0.053; //Tendon strain at F0</span>
<span class="gr">    K1 = 10; //Slow twitch factor</span>
<span class="gr">    K2 = 0; //Fast twitch factor(zero when no info available)</span>
<span class="gr">    Fcfast = 0.4; //Percentage of fast to slow factor</span>
<span class="gr">    Jt = 3.0; //Shape parameter for the tendon stiffness</span>
<span class="gr">    Jpe = 3.0; //Shape parameter for the parallel stiffness</span>
<span class="gr">    PEFactor = 5.0; //Parameter for influence of parallel stiffness</span>
<span class="gr">  }; // End of BicepsLongModel</span>

  <span class="c1">//---------------------------------</span>
  <span class="n">AnyMuscleViaPoint</span> <span class="n">Brachialis</span> <span class="o">=</span> <span class="p">{</span>
</pre></div>
</div>
<p>As you can see from the comments, the muscle has many parameters you
have to set. The significance of each of these is explained in detail in
the muscle modeling tutorial. For this model to take effect, we must
assign it to the biceps long muscle. It is a little further down in the
file, where the red line must be changed:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="c1">//---------------------------------</span>
<span class="n">AnyMuscleViaPoint</span> <span class="n">BicepsLong</span> <span class="o">=</span> <span class="p">{</span>
  <span class="gr">AnyMuscleModel &amp;MusMdl = .BicepsLongModel;</span>
  <span class="kt">AnyRefNode</span> <span class="o">&amp;</span><span class="n">Org</span> <span class="o">=</span> <span class="p">..</span><span class="n">GlobalRef</span><span class="p">.</span><span class="n">BicepsLong</span><span class="p">;</span>
  <span class="kt">AnyRefNode</span> <span class="o">&amp;</span><span class="n">Ins</span> <span class="o">=</span> <span class="p">..</span><span class="n">Segs</span><span class="p">.</span><span class="n">ForeArm</span><span class="p">.</span><span class="n">Biceps</span><span class="p">;</span>
  <span class="kt">AnyDrawMuscle</span> <span class="n">DrwMus</span> <span class="o">=</span> <span class="p">{};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>What we have done here is to give BicepsLong a new and more advanced
muscle model. In this lesson, we also switch to a different muscle
recruitment criteria MR_MinMaxStrict, which is better suited for
InverseDynamics of overloaded models:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyBodyStudy</span> <span class="n">ArmStudy</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">Model</span> <span class="o">=</span> <span class="p">.</span><span class="n">ArmModel</span><span class="p">;</span>
  <span class="gr">InverseDynamics.Criterion.Type = MR_MinMaxStrict;</span>
  <span class="n">Gravity</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Let’s have a look at the consequences. Press Load button or F7 and
subsequently run the InverseDynamics study. Then, press Ctrl + 1 to navigate to the Chart  to
investigate the results.</p>
<p><img alt="Chart view BicepsLong.Ft" src="../_images/image133.png" /></p>
<p>This graph shows the muscle force or more precisely the force in the tendon. The
force in this more complex muscle model is composed of 3 elements: Fm, the
muscle force is the force from the contractile element of the muscle. Parallel
to Fm is Fp which is the passive elastic element in the muscle. Conected in
series of the muscle, is the tendon where Ft is the elastic tendon force. If you
pick the Fp property, you should get the following graph:</p>
<p><img alt="Chart view BicepsLong.Fp" src="../_images/image225.png" /></p>
<p>The parallel-elastic force Fp sets in when the muscle is stretched beyond
its optimal fiber length. In the movement of this example, the elbow
starts at 90 degrees flexion, and as the graph shows, this gives rise to
about 0.7 N of passive force at the beginning of the movement. This
indicates that the tendon we have specified is too short. If the
movement was extending the elbow instead of flexing it, the passive
force would rise. This means that the result of the simulation
depends a lot on having the correct length of the tendon. If it is too
short, too much of the load will be carried by passive muscle forces. In
this example where we have only one muscle with a complex model, it
would not be too difficult to adjust the tendon length manually until we
get it right, but in models with many muscles, this can be a very
tedious task, particularly since it has to be repeated every time the
dimensions of the model are changed. Instead, the answer is to let
AnyBody calibrate the tendon length automatically.</p>
<p>AnyBody’s advanced muscle model, the AnyMuscleModel3E, is basically a
phenomenological model based on the classical works of Hill. It presumes that
each muscle has an optimum contraction in which its fibers have their best
force-producing capability. To do a simple 1 parameter calibration we would need
to know the set of joint positions corresponding to this optimum fiber length
for each muscle, then those joint positions were the ones we would be
calibrating the muscle in.</p>
<p>Calibrating the muscle in a particular position requires a calibration
study. Its basic definition is straightforward:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="c1">// =======================================================</span>
<span class="c1">// &quot;The body study&quot;</span>
<span class="c1">// =======================================================</span>
<span class="kt">AnyBodyStudy</span> <span class="n">ArmModelStudy</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">Model</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">ArmModel</span><span class="p">;</span>
  <span class="n">InverseDynamics</span><span class="p">.</span><span class="n">Criterion</span><span class="p">.</span><span class="n">Typer</span> <span class="o">=</span> <span class="kp">MR_MinMaxStrict</span><span class="p">;</span>
  <span class="n">Gravity</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">};</span>
<span class="p">};</span>

<span class="gr">// A new calibration study</span>
<span class="gr">  AnyBodyCalibrationStudy CalibrationStudy = {</span>
<span class="gr">    AnyFolder &amp;Model = Main.ArmModel;</span>
<span class="gr">    nStep = 1;</span>
<span class="gr">  }; // End of study</span>

</pre></div>
</div>
<p>If you load the model you can study the structure of the new study in the Operations tab:</p>
<p><img alt="Operations Main.InverseDynamics" src="../_images/image325.png" /></p>
<p>You can see that it has multiple operations. The interesting ones are
the two latter: TendonLengthAdjustment and LigamentLengthAdjustment. As
the names indicate, they are for tendon and ligament calibration
respectively. Notice that the study only has one time step. The model
posture in that step should be the position in which you wish to
calibrate the tendon. If you run the TendonLengthAdjustment operation
you will notice that the model takes the initial posture of the flexion
movement it was doing in the InverseDynamics. This is because of the
line</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">Model</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">ArmModel</span><span class="p">;</span>
</pre></div>
</div>
<p>The ArmModel contains movement drivers, and when they are included in
the study they cause the model to attain the same posture in the
calibration study as it does in the inverse dynamic analysis. To be able
to calibrate in another posture we must perform a small restructuring of
the model and perhaps recommend a organizing things a little differently
in general when making models.</p>
<p>We included the movement in the model when we developed it in the
“Getting Started with AnyScript” tutorial because we wanted things to be
simple. But think for a moment about how you would typically want to use
models. Let’s imagine you have developed a model of a leg. One day you
might want to simulate squat, another day perhaps gait, and yet another
day a football kick. You would want to use the same model but with
different sets of drivers. This speaks in favor of having drivers,
loads, and other problem-specific properties outside the folder
containing the body model.</p>
<p>Calibration is actually an example of using the same model with two
different movements, so we have to place the drivers outside the
ArmModel folder. In the editor, highlight the entire Drivers folder, cut
it out, and paste it in right below the end of the ArmModel folder like
this:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="p">};</span> <span class="c1">// MyModel</span>

<span class="gr">AnyFolder Drivers = {</span>
<span class="gr">  //---------------------------------</span>
<span class="gr">  AnyKinEqSimpleDriver ShoulderMotion = {</span>
<span class="gr">    AnyRevoluteJoint &amp;Jnt = Main.ArmModel.Jnts.Shoulder;  // Changed!</span>
<span class="gr">    DriverPos = {-100*pi/180};</span>
<span class="gr">    DriverVel = {30*pi/180};</span>
<span class="gr">    Reaction.Type = {Off};</span>
<span class="gr">  }; // Shoulder driver</span>

<span class="gr">  //---------------------------------</span>
<span class="gr">  AnyKinEqSimpleDriver ElbowMotion = {</span>
<span class="gr">    AnyRevoluteJoint &amp;Jnt = Main.ArmModel.Jnts.Elbow;  // Changed!</span>
<span class="gr">    DriverPos = {90*pi/180};</span>
<span class="gr">    DriverVel = {45*pi/180};</span>
<span class="gr">    Reaction.Type = {Off};</span>
<span class="gr">  }; // Elbow driver</span>
<span class="gr">}; // Driver folder</span>
</pre></div>
</div>
<p>Notice that after moving the Drivers folder we have changed the
references to the joints. We also have to change the study a little bit.
This is because the study points at the ArmModel folder and that no
longer contains a movement, so the study would not know how to move the
model, unless we add this line:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="c1">// The study: Operations to be performed on the model</span>
<span class="kt">AnyBodyStudy</span> <span class="n">ArmStudy</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">Model</span> <span class="o">=</span> <span class="p">.</span><span class="n">ArmModel</span><span class="p">;</span>
  <span class="gr">AnyFolder &amp;Drivers = .Drivers;</span>
  <span class="n">InverseDynamics</span><span class="p">.</span><span class="n">Criterion</span><span class="p">.</span><span class="n">Type</span> <span class="o">=</span> <span class="kp">MR_MinMaxStrict</span><span class="p">;</span>
  <span class="n">Gravity</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Now we are ready to define a couple of static drivers specifically for
calibration of the muscles. We create a CalibrationDrivers folder right
below the Drivers folder:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="p">};</span> <span class="c1">// Driver folder</span>

<span class="gr">AnyFolder CalibrationDrivers = {</span>
<span class="gr">  //---------------------------------</span>
<span class="gr">  AnyKinEqSimpleDriver ShoulderMotion = {</span>
<span class="gr">    AnyJoint &amp;Jnt = Main.ArmModel.Jnts.Shoulder;</span>
<span class="gr">    DriverPos = {-90*pi/180}; // Vertical upper arm</span>
<span class="gr">    DriverVel = {0.0};</span>
<span class="gr">    Reaction.Type = {Off};</span>
<span class="gr">  };</span>
<span class="gr">  //---------------------------------</span>
<span class="gr">  AnyKinEqSimpleDriver ElbowMotion = {</span>
<span class="gr">    AnyJoint &amp;Jnt = Main.ArmModel.Jnts.Elbow;</span>
<span class="gr">    DriverPos = {30*pi/180}; // 30 degrees elbow flexion</span>
<span class="gr">    DriverVel = {0.0};</span>
<span class="gr">    Reaction.Type = {Off};</span>
<span class="gr">  };</span>
<span class="gr">};</span>


<span class="c1">// The study: Operations to be performed on the model</span>
</pre></div>
</div>
<p>These drivers are static because their velocities are zero. They specify
a posture with the upper arm vertical and the elbow at 30 degrees
flexion. Notice the expressions converting degrees to radians.</p>
<p>The final step is to modify the calibration study is to use the calibration
drivers:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="c1">// A new calibration study</span>
<span class="kt">AnyBodyCalibrationStudy</span> <span class="n">CalibrationStudy</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">Model</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">ArmModel</span><span class="p">;</span>
  <span class="gr">AnyFolder &amp;Drivers = .CalibrationDrivers;</span>
  <span class="n">nStep</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">};</span> <span class="c1">// End of study</span>
</pre></div>
</div>
<p>What we have now is a study that uses the model together with two static drivers
for calibration of the muscles, and a study that uses the model with the
previous set of dynamic drivers. If you run the CalibrationStudy
TendonLengthAdjustment first, the system will adjust the tendon lengths and
remember the values for the until the model is reloaded. Now run the
InverseDynamics study and have a look at the chart. Notice that the Fp passive
muscle force now is zero because the BicepsLongModel slack length Lt0 was
elongated by the calibration.</p>
<p>Here’s a link to the finished <a class="reference download internal" download="" href="../_downloads/84976e0b4687df1d8c8f450cbb72d10a/calibration.any"><code class="xref download docutils literal notranslate"><span class="pre">calibration.any</span> <span class="pre">example</span></code></a>.</p>
</section>


              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="lesson6.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Lesson 6: Composite Recruitment Criteria</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="../Muscle_modeling/index.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Muscle Modeling</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2022, AnyBody Technology.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>
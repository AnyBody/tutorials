
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<meta content="noindex" name="robots" />

<meta property="og:title" content="Lesson 3: Connecting Segments by Joints" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="https://anyscript.org/A_Getting_started_anyscript/lesson3.html" />
  
<meta property="og:site_name" content="AnyScript Tutorials" />
  
<meta property="og:description" content="Some quick theory: You can think of joints in two different ways: Providers of freedom, when compared to a system of rigidly joined segments, Constraints on freedom, when compared to a system of fr..." />
  
<meta property="og:image" content="https://anyscript.org/_images/image14.png" />
  
<meta property="og:image:alt" content="Model tree ElbowNode" />
  
    <title>Lesson 3: Connecting Segments by Joints &#8212; AnyBody Tutorials v7.4.0-dev</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lesson 4: Imparting movement with Drivers" href="lesson4.html" />
    <link rel="prev" title="Lesson 2: Defining Segments and Displaying Objects" href="lesson2.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    <img src="../_static/AnyBodyTutorials2.svg" class="logo__image only-light" alt="Logo image">
    <img src="../_static/AnyBodyTutorials2.svg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../GettingStarted.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../Tutorials.html">
  AnyBody Tutorials
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../about.html">
  About
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/anybody/anybody-tutorial/" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_Getting_started/index.html">
   1. Getting Started - First steps
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_Getting_started/intro.html">
     Getting Started Tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_Getting_started/lesson1.html">
     Lesson 1: Creating a Standing Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_Getting_started/lesson2.html">
     Lesson 2: Controlling the Posture
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_Getting_started/lesson3.html">
     Lesson 3: Reviewing Analysis Results
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   2. How to write AnyScript
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lesson1.html">
     Lesson 1: Basic Concepts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lesson2.html">
     Lesson 2: Defining Segments and Displaying Objects
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Lesson 3: Connecting Segments by Joints
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lesson4.html">
     Lesson 4: Imparting movement with Drivers
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lesson5.html">
     Lesson 5: Definition of Muscles and External Forces
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="lesson6.html">
     Lesson 6: Adding Real Bone Geometries
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_Getting_started_modeling/index.html">
   3. Modelling the Human body
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_Getting_started_modeling/intro.html">
     Introduction
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_Getting_started_modeling/lesson1.html">
     Lesson 1: Starting with a New Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_Getting_started_modeling/lesson2.html">
     Lesson 2: Adjusting the Human Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_Getting_started_modeling/lesson3.html">
     Lesson 3: Making Ends Meet
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../A_Getting_started_modeling/lesson4.html">
     Lesson 4: Kinetics - Computing Forces
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../A_Getting_started_AMMR/index.html">
   4. The AnyBody Model Repository
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference external" href="https://anyscript.org/ammr-doc/creating_model_from_scratch.html">
     Creating a Human Model from scratch
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference external" href="https://anyscript.org/ammr-doc/Scaling/lesson1.html">
     Scaling: Joint to joint scaling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference external" href="https://anyscript.org/ammr-doc/Scaling/lesson2.html">
     Scaling: External Body Measurements
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference external" href="https://anyscript.org/ammr-doc/Scaling/lesson3.html">
     Scaling: Segmental scaling factors
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#some-quick-theory">
   Some quick theory
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-global-reference-frame">
   The global reference frame
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-revolute-joint">
   Creating a revolute joint
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#relative-folder-paths-why-use-and-in-anyscript">
   Relative folder paths - Why use ‘.’ and ‘..’ in AnyScript?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reference-objects-and-the-symbol">
   Reference objects and the ‘&amp;’ symbol
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#customizing-the-revolute-joint">
   Customizing the revolute joint
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-revolute-elbow-joint">
   Creating a revolute elbow joint
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#absolute-folder-path-and-some-useful-tips">
   Absolute folder path (and some useful tips)
  </a>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      

<div class="tocsection editthispage">
    <a href="https://github.com/anybody/anybody-tutorial/edit/master/./A_Getting_started_anyscript/lesson3.md">
        <i class="fas fa-pencil-alt"></i> Edit this page
    </a>
</div>

    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section class="tex2jax_ignore mathjax_ignore" id="lesson-3-connecting-segments-by-joints">
<h1>Lesson 3: Connecting Segments by Joints<a class="headerlink" href="#lesson-3-connecting-segments-by-joints" title="Permalink to this headline">#</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Here’s an AnyScript file to start on if you have not completed the
previous lesson: <a class="reference download internal" download="" href="../_downloads/580d7e9997b9565d5ee7a23e30e86da8/demo.lesson3.any"><code class="xref download docutils literal notranslate"><span class="pre">demo.lesson3.any</span></code></a>.</p>
</div>
<section id="some-quick-theory">
<h2>Some quick theory<a class="headerlink" href="#some-quick-theory" title="Permalink to this headline">#</a></h2>
<p>You can think of joints in two different ways:</p>
<ul class="simple">
<li><p><strong>Providers of freedom</strong>, when compared to a system of rigidly joined segments</p></li>
<li><p><strong>Constraints on freedom</strong>, when compared to a system of free-floating segments</p></li>
</ul>
<p><strong>In AnyBody, we consider joints as being constraints on freedom</strong>. When you create
two independent segments in AnyBody, they will have 2 x 6 = 12 degrees of freedom
in total.</p>
<p>Joints in AnyBody take away (or constrain) some of these degrees of freedom with the different joint types (e.g. revolute, spherical, prismatic etc.)
differing only in the number and type of degrees of freedom they constrain.</p>
</section>
<section id="the-global-reference-frame">
<h2>The global reference frame<a class="headerlink" href="#the-global-reference-frame" title="Permalink to this headline">#</a></h2>
<p>Every model needs a global reference frame to serve as a ground reference point for measuring positions &amp; orientations from.
It is already defined in the model template that you originally used, and is shown below:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyFixedRefFrame</span> <span class="n">GlobalRef</span> <span class="o">=</span> <span class="p">{</span>

   <span class="c1">// Todo: Add points for grounding</span>
   <span class="c1">// of the model here</span>

<span class="p">};</span> <span class="c1">// Global reference frame</span>
</pre></div>
</div>
<p><strong>Just like with segments, you can add point nodes to the global reference frame for attaching joints and muscles. There is however no
concept of mass associated with this frame.</strong></p>
<p>You will now add some nodes to the global frame by copy-pasting the following lines into your model (Alternatively use the class inserter
and then copy-paste the class properties alone):</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span> <span class="kt">AnyFixedRefFrame</span> <span class="n">GlobalRef</span> <span class="o">=</span> <span class="p">{</span>
  <span class="gr">AnyDrawRefFrame DrwGlobalRef = {};</span>

<span class="gr">   AnyRefNode Shoulder = {</span>
<span class="gr">     sRel = {0,0,0};</span>
<span class="gr">   };</span>
<span class="gr">   AnyRefNode DeltodeusA = {</span>
<span class="gr">     sRel = {0.05,0,0};</span>
<span class="gr">   };</span>
<span class="gr">   AnyRefNode DeltodeusB = {</span>
<span class="gr">     sRel = {-0.05,0,0};</span>
<span class="gr">   };</span>
<span class="gr">   AnyRefNode BicepsLong = {</span>
<span class="gr">     sRel = {0.1,0,0};</span>
<span class="gr">   };</span>
<span class="gr">   AnyRefNode TricepsLong = {</span>
<span class="gr">     sRel = {-0.1,0,0};</span>
<span class="gr">   };</span>
<span class="p">};</span> <span class="c1">// Global reference frame</span>
</pre></div>
</div>
<p>The first line, “<code class="docutils literal notranslate"><span class="pre">AnyDrawRefFrame</span></code> …” merely displays the global
reference system in the graphics window. The remaining lines define point nodes attached to the global reference
system.</p>
<p>Let us scale down the display
size and change its color to distinguish it from the yellow segments:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyDrawRefFrame</span> <span class="n">DrwGlobalRef</span> <span class="o">=</span> <span class="p">{</span>
  <span class="gr">ScaleXYZ = {0.1, 0.1, 0.1};</span>
<span class="gr">  RGB = {0,1,0};</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="creating-a-revolute-joint">
<h2>Creating a revolute joint<a class="headerlink" href="#creating-a-revolute-joint" title="Permalink to this headline">#</a></h2>
<p>We can now connect the upper arm to the global reference frame through a shoulder joint.
For this planar 2-D model, where we simplify the shoulder as a simple revolute joint (also known as a hinge joint).
We create a new <code class="docutils literal notranslate"><span class="pre">AnyFolder</span></code> object, to contain all joints in the model:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span>    <span class="p">};</span> <span class="c1">// LowerArm</span>
  <span class="p">};</span> <span class="c1">// Segs folder</span>

<span class="gr">AnyFolder Jnts = {</span>

<span class="gr">    //---------------------------------</span>
<span class="gr">    AnyRevoluteJoint Shoulder = {</span>

<span class="gr">      AnyRefNode &amp;GroundNode = ..GlobalRef.Shoulder;</span>
<span class="gr">      AnyRefNode &amp;UpperArmNode = ..Segs.UpperArm.ShoulderNode;</span>

<span class="gr">      Axis = z;</span>

<span class="gr">    }; // Shoulder joint</span>

<span class="gr">}; // Jnts folder</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">AnyRevoluteJoint</span></code> class creates a revolute joint object connecting two nodes on different segments.</p>
</section>
<section id="relative-folder-paths-why-use-and-in-anyscript">
<span id="relative-folder-path"></span><h2>Relative folder paths - Why use ‘.’ and ‘..’ in AnyScript?<a class="headerlink" href="#relative-folder-paths-why-use-and-in-anyscript" title="Permalink to this headline">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">AnyRevoluteJoint</span></code> object named “Shoulder”, needs to know which nodes on each segment to connect. For this
purpose, we have the lines:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyRefNode</span> <span class="o">&amp;</span><span class="n">GroundNode</span> <span class="o">=</span> <span class="p">..</span><span class="n">GlobalRef</span><span class="p">.</span><span class="n">Shoulder</span><span class="p">;</span>
<span class="kt">AnyRefNode</span> <span class="o">&amp;</span><span class="n">UpperArmNode</span> <span class="o">=</span> <span class="p">..</span><span class="n">Segs</span><span class="p">.</span><span class="n">UpperArm</span><span class="p">.</span><span class="n">ShoulderNode</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>They refer to two nodes that we created earlier, located on the “GlobalRef” and “UpperArm”
segments. Notice the two dots in front of the names. They signify that
the “GlobalRef” and “Segs” folders are defined two levels outside the folder
we are writing into, in the model tree.</strong></p>
<p>If you neglected the two dots, then AnyBody would search for the two objects in the “Shoulder” folder and fail
to find them. This “dot” system is quite similar to the system you may
know from directory structures in Dos, Windows, Unix, or just about any
other computer operating system.</p>
</section>
<section id="reference-objects-and-the-symbol">
<span id="reference-objects"></span><h2>Reference objects and the ‘&amp;’ symbol<a class="headerlink" href="#reference-objects-and-the-symbol" title="Permalink to this headline">#</a></h2>
<p>You can also see that the Shoulder point on GlobalRef has been given the local name of “GroundNode”.
This means that, within the current folder, we can simply refer to
the point as “GroundNode” instead of the longer external reference.</p>
<p><strong>You will also realize that “GroundNode” is merely a reference (a pointer) to “GlobalRef.Shoulder”
rather than a copy of it. We denote this by the</strong> <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> <strong>sign.</strong></p>
<p>If “Main.ArmModel.GlobalRef.Shoulder” moves around, “Main.ArmModel.Jnts.Shoulder.GroundNode” will keep up with those changes in position. Hit F7 to reload the model again to make
sure that the definition is correct.</p>
</section>
<section id="customizing-the-revolute-joint">
<h2>Customizing the revolute joint<a class="headerlink" href="#customizing-the-revolute-joint" title="Permalink to this headline">#</a></h2>
<p>We then have:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="n">Axis</span> <span class="o">=</span> <span class="kp">z</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Every node on a rigid body segment has its own reference frame which moves along with the segment.
By default, these coordinate systems are parallel to the segment frame. However, the relative orientations
between these two frames can be altered by the user. Check the</strong> <code class="docutils literal notranslate"><span class="pre">ARel</span></code> <strong>property of and AnyRefNode
object in the AnyScript Reference Manual for more information.</strong></p>
<p>The AnyBody Modeling System is always three-dimensional, even when our model is
two dimensional. The property <code class="docutils literal notranslate"><span class="pre">Axis</span> <span class="pre">=</span> <span class="pre">z</span></code> simply specifies that both
segments connected by that joint will rotate about the z axis of two nodes forming the joint.</p>
<p>In other words, the z-axes of the nodes on either connected segment will
always be parallel, and so the mechanism will rotate in the plane
perpendicular to these axes. The out-of-plane relative orientation of
the two segments can be adjusted by rotating the reference frames of the
nodes being connected. This is relevant if you want one of the segments
to rotate about some skewed axis.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The first of the two
nodes declared in the joint (in this case <code class="docutils literal notranslate"><span class="pre">GroundNode</span></code>) becomes the
default reference frame for the joint. When directly accessing the
post-simulation values of constraint reaction forces etc., you must
remember to interpret them in the joint’s default reference frame.</p>
</div>
</section>
<section id="creating-a-revolute-elbow-joint">
<h2>Creating a revolute elbow joint<a class="headerlink" href="#creating-a-revolute-elbow-joint" title="Permalink to this headline">#</a></h2>
<p>We will next add a revolute elbow joint. While the definition is similar to the shoulder,
you will learn to use a handy tool to define the references. Copy-paste the skeleton of the elbow
joint as follows:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyFolder</span> <span class="n">Jnts</span> <span class="o">=</span> <span class="p">{</span>
       <span class="c1">//---------------------------------</span>
    <span class="kt">AnyRevoluteJoint</span> <span class="n">Shoulder</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">Axis</span> <span class="o">=</span> <span class="kp">z</span><span class="p">;</span>
        <span class="kt">AnyRefNode</span> <span class="o">&amp;</span><span class="n">GroundNode</span> <span class="o">=</span> <span class="p">..</span><span class="n">GlobalRef</span><span class="p">.</span><span class="n">Shoulder</span><span class="p">;</span>
        <span class="kt">AnyRefNode</span> <span class="o">&amp;</span><span class="n">UpperArmNode</span> <span class="o">=</span> <span class="p">..</span><span class="n">Segs</span><span class="p">.</span><span class="n">UpperArm</span><span class="p">.</span><span class="n">ShoulderNode</span><span class="p">;</span>
    <span class="p">};</span> <span class="c1">// Shoulder joint</span>

    <span class="gr">AnyRevoluteJoint Elbow = {</span>
<span class="gr">        Axis = z;</span>
<span class="gr">        AnyRefNode &amp;UpperArmNode = ;</span>
<span class="gr">        AnyRefNode &amp;ForeArmNode = ;</span>
<span class="gr">    }; // Elbow joint</span>
<span class="p">};</span> <span class="c1">// Jnts folder</span>
</pre></div>
</div>
<p>The node references within “Elbow” are not pointing at
anything yet. In this simple model it is easy to find the relative path
of the pertinent nodes on the upper arm and the forearm, but in a
complex model, this can be difficult. So we use “Absolute folder paths”.</p>
</section>
<section id="absolute-folder-path-and-some-useful-tips">
<span id="absolute-folder-path"></span><h2>Absolute folder path (and some useful tips)<a class="headerlink" href="#absolute-folder-path-and-some-useful-tips" title="Permalink to this headline">#</a></h2>
<p>Place the cursor just before the semicolon in the line that reads <code class="docutils literal notranslate"><span class="pre">AnyRefNode</span> <span class="pre">&amp;UpperArmNode</span> <span class="pre">=</span> <span class="pre">;</span></code>.
Open the model tree where the UpperArm folder should expand as shown below.</p>
<p><img alt="Model tree ElbowNode" src="../_images/image14.png" /></p>
<p><strong>Right-click the folder named “ElbowNode”, and select “Insert object
name” from the context menu. This writes the full, absolute path of the node
into the Elbow joint definition where you placed the cursor.</strong></p>
<p>Repeat the process to expand the ForeArm segment and insert its ElbowNode in the
line below to obtain this:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyRevoluteJoint</span> <span class="n">Elbow</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">Axis</span> <span class="o">=</span> <span class="kp">z</span><span class="p">;</span>
  <span class="kt">AnyRefNode</span> <span class="o">&amp;</span><span class="n">UpperArmNode</span> <span class="o">=</span> <span class="gr">Main.ArmModel.Segs.UpperArm.ElbowNode</span><span class="p">;</span>
  <span class="kt">AnyRefNode</span> <span class="o">&amp;</span><span class="n">ForeArmNode</span> <span class="o">=</span>  <span class="gr">Main.ArmModel.Segs.ForeArm.ElbowNode</span><span class="p">;</span>
<span class="p">};</span> <span class="c1">// Elbow joint</span>
</pre></div>
</div>
<p>It seems like everything is connected now, but we still get this
annoying error message when we reload the model:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Model Warning: Study &#39;Main.ArmStudy&#39; contains too few kinematic
constraints to be kinematically determinate.
</pre></div>
</div>
<p>The explanation is that we have created joints, but we have not
specified the joint posture yet. The shoulder and elbow joints can still take any
angular position, so there are two degrees of freedom whose kinematic
states need to specified before AnyBody can solve for the mechanism’s
kinematics. This is taken care of by kinematic drivers.
They are one of the subjects of <a class="reference internal" href="lesson4.html"><span class="doc">Lesson 4: Imparting Movement with Drivers</span></a>.</p>
</section>
</section>


              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="lesson2.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Lesson 2: Defining Segments and Displaying Objects</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="lesson4.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Lesson 4: Imparting movement with Drivers</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2022, AnyBody Technology.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>
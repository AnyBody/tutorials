

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<meta content="noindex" name="robots" />
<meta property="og:title" content="Lesson 6: General Muscles" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://anyscript.org/Muscle_modeling/lesson6.html" />
<meta property="og:site_name" content="AnyScript Tutorials" />
<meta property="og:description" content="Physiological muscles are truly amazing machines, and despite many attempts it has not been possible to make technical actuators that are as light and efficient as natural muscles. As you may have ..." />
<meta property="og:image" content="https://anyscript.org/_images/image18.jpeg" />
<meta property="og:image:alt" content="Arm 2D" />
<meta name="description" content="Physiological muscles are truly amazing machines, and despite many attempts it has not been possible to make technical actuators that are as light and efficient as natural muscles. As you may have ..." />

    <title>Lesson 6: General Muscles &#8212; AnyBody Tutorials v7.4.3-dev</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Muscle_modeling/lesson6';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lesson 7: Ligaments" href="lesson7.html" />
    <link rel="prev" title="Lesson 5: Muscle Models" href="lesson5.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder=""
         aria-label=""
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/AnyBodyTutorials2.svg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/AnyBodyTutorials2.svg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder=""
         aria-label=""
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../GettingStarted.html"><strong>Getting Started</strong></a><input checked class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../A_Getting_started/index.html">Getting Started - First steps</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started/intro.html">Getting Started Tutorial</a></li>


<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started/lesson1.html">Lesson 1: Creating a Standing Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started/lesson2.html">Lesson 2: Controlling the Posture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started/lesson3.html">Lesson 3: Reviewing Analysis Results</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../A_Getting_started_anyscript/index.html">How to write AnyScript</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_anyscript/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_anyscript/lesson1.html">Lesson 1: Basic Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_anyscript/lesson2.html">Lesson 2: Defining Segments and Displaying Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_anyscript/lesson3.html">Lesson 3: Connecting Segments by Joints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_anyscript/lesson4.html">Lesson 4: Imparting movement with Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_anyscript/lesson5.html">Lesson 5: Definition of Muscles and External Forces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_anyscript/lesson6.html">Lesson 6: Adding Real Bone Geometries</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../A_Getting_started_modeling/index.html">Modelling the Human body</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_modeling/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_modeling/lesson1.html">Lesson 1: Starting with a New Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_modeling/lesson2.html">Lesson 2: Adjusting the Human Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_modeling/lesson3.html">Lesson 3: Making Ends Meet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_modeling/lesson4.html">Lesson 4: Kinetics - Computing Forces</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../A_Getting_started_AMMR/index.html">The AnyBody Model Repository</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference external" href="https://anyscript.org/ammr-doc/creating_model_from_scratch.html">Creating a Human Model from scratch</a></li>
<li class="toctree-l3"><a class="reference external" href="https://anyscript.org/ammr-doc/Scaling/lesson1.html">Scaling: Joint to joint scaling</a></li>
<li class="toctree-l3"><a class="reference external" href="https://anyscript.org/ammr-doc/Scaling/lesson2.html">Scaling: External Body Measurements</a></li>
<li class="toctree-l3"><a class="reference external" href="https://anyscript.org/ammr-doc/Scaling/lesson3.html">Scaling: Segmental scaling factors</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../Tutorials.html"><strong>Tutorials</strong></a><input checked class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../A_study_of_studies/index.html">A Study of Studies</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../A_study_of_studies/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_study_of_studies/lesson1.html">Lesson1: Mechanical System Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_study_of_studies/lesson2.html">Lesson2: Initial Conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_study_of_studies/lesson3.html">Lesson 3: Kinematic Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_study_of_studies/lesson4.html">Lesson 4: Inverse Dynamics</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Making_things_move/index.html">Making things move</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Making_things_move/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Making_things_move/lesson1.html">Lesson1: Simple drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Making_things_move/lesson2.html">Lesson 2: Using motion capture data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Making_things_move/lesson3.html">Lesson3: Noise and filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Making_things_move/lesson4.html">Lesson 4: Parameter identification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Making_things_move/lesson5.html">Lesson 5: Using real data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Making_things_move/lesson6.html">Lesson 6: Troubleshooting C3D files</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../MuscleRecruitment/index.html">Inverse Dynamics of Muscle Systems</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/Inverse_dynamics.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/lesson1.html">Lesson 1: The Basics of Muscle Recruitment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/lesson2.html">Lesson 2: Linear Muscle Recruitment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/lesson3.html">Lesson 3: Quadratic Muscle Recruitment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/lesson4.html">Lesson 4: Polynomial Muscle Recruitment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/lesson5.html">Lesson 5: Min/Max Muscle Recruitment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/lesson6.html">Lesson 6: Composite Recruitment Criteria</a></li>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/lesson_calibration.html">Lesson 7: Calibration</a></li>
</ul>
</li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="index.html">Muscle Modeling</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="lesson1.html">Lesson 1: The Basics of Muscle Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="lesson2.html">Lesson 2: Controlling Muscle Drawing</a></li>
<li class="toctree-l3"><a class="reference internal" href="lesson3.html">Lesson 3: Via-point Muscles</a></li>
<li class="toctree-l3"><a class="reference internal" href="lesson4.html">Lesson 4: Wrapping Muscles</a></li>
<li class="toctree-l3"><a class="reference internal" href="lesson5.html">Lesson 5: Muscle Models</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Lesson 6: General Muscles</a></li>
<li class="toctree-l3"><a class="reference internal" href="lesson7.html">Lesson 7: Ligaments</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../The_mechanical_elements/index.html">The Mechanical Elements</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../The_mechanical_elements/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The_mechanical_elements/lesson1.html">Lesson 1: Segments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The_mechanical_elements/lesson2.html">Lesson 2: Joints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The_mechanical_elements/lesson3.html">Lesson 3: Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The_mechanical_elements/lesson4.html">Lesson 4: Kinematic Measures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The_mechanical_elements/lesson5.html">Lesson 5: Forces</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../ForceDependentKinematics/index.html">Force-Dependent Kinematics</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../ForceDependentKinematics/fdk.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ForceDependentKinematics/lesson1.html">Lesson 1: The Baseline Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ForceDependentKinematics/lesson2.html">Lesson 2: Adding FDK Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ForceDependentKinematics/lesson3.html">Lesson 3: Results of FDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ForceDependentKinematics/lesson4.html">Lesson 4: Using Surfaces to Define the Knee Joint</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ForceDependentKinematics/lesson5.html">Lesson 5: Using Contact Forces to Replace a Joint in a Human Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ForceDependentKinematics/fdkappendix.html">FDK appendix</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Parameter_studies_and_optimization/index.html">Parameter Studies and Optimization</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Parameter_studies_and_optimization/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Parameter_studies_and_optimization/lesson1.html">Defining a Parameter Study</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Parameter_studies_and_optimization/lesson2.html">Optimization Studies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Parameter_studies_and_optimization/lesson3.html">Optimization Studies in Python</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Finite_element_analysis/index.html">Finite Element Analysis Interfacing</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Finite_element_analysis/lesson1.html">Lesson 1: Export of data for FEA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Finite_element_analysis/lesson2.html">Lesson 2: ANSYS Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Finite_element_analysis/lesson3.html">Lesson 3: Abaqus Interface</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../AnyExp4SOLIDWORKS/index.html">Making Models using SOLIDWORKS</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../AnyExp4SOLIDWORKS/lesson1.html">Translating a SOLIDWORKS CAD model to AnyBody</a></li>
<li class="toctree-l3"><a class="reference internal" href="../AnyExp4SOLIDWORKS/lesson2.html">Making the translated AnyScript model move</a></li>
<li class="toctree-l3"><a class="reference internal" href="../AnyExp4SOLIDWORKS/lesson3.html">Creating human-machine integrated analysis model</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Scaling/index.html">Scaling and Personalizing your model</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../Scaling/lesson3.html">Lesson 1: Scaling based on medical images</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-17"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../Scaling/lesson3_appendix.html"> Lesson 1 appendix</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Scaling/lesson4.html">Lesson 2: Including a custom scaling function into your model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Posture_and_movement/intro.html">Posture and Movement Prediction</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Interface_features/index.html">User interface features</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-18"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/lesson1.html">Lesson 1: The Editor Window</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/lesson2.html">Lesson 2: The Model View Window</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/lesson3.html">Lesson 3: The Chart View</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/lesson4.html">Lesson 4: The Model Tree and Object Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/lesson5.html">Lesson 5: The Command Line Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/lesson6.html">Lesson 6: Modifying the Loaded Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/lesson7.html">Lesson 7: Wrapping the Model with AnyBody Project</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Advanced_script_features/index.html">Advanced Script Features</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-19"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Advanced_script_features/lesson1.html">Lesson 1: Using References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Advanced_script_features/lesson2.html">Lesson 2: Using Include Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Advanced_script_features/lesson3.html">Lesson 3: Mathematical Expressions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Troubleshooting_anyscript/intro.html">Trouble Shooting AnyScript Models</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Validation_of_models/index.html">Validation of Models</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-20"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Validation_of_models/intro.html">Introduction to validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Validation_of_models/Kinematic_input.html">Validating Kinematic input</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../about.html"><strong>About</strong></a><input checked class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-21"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html">Help improve tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../legal.html">Legal, Trademarks and Copyrights</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/anybody/anybody-tutorial/edit/main/Muscle_modeling/lesson6.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/anybody/anybody-tutorial/issues/new?title=Issue%20on%20page%20%2FMuscle_modeling/lesson6.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lesson 6: General Muscles</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#muscles-as-joint-torque-providers">Muscles as joint torque providers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#contact-and-other-boundary-conditions">Contact and other boundary conditions</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="lesson-6-general-muscles">
<h1>Lesson 6: General Muscles<a class="headerlink" href="#lesson-6-general-muscles" title="Permalink to this heading">#</a></h1>
<p>Physiological muscles are truly amazing machines, and despite many
attempts it has not been possible to make technical actuators that are
as light and efficient as natural muscles. As you may have seen in the
preceding sections, the mathematical modeling of muscles is not an easy
task either. But once it has been done, we can use some of the
properties of muscles to our advantage. We would like these “muscles” to
be able to have a slightly more general formulation than physiological
muscles, which are confined to acting along strings.</p>
<p>The solution is the AnyGeneralMuscle class. This type of muscle is
capable of acting on <em>Kinematic Measures</em>. <em>Kinematic Measures</em> is an
abstract class representing anything you can measure on a model, and
there is in fact <a class="reference internal" href="../The_mechanical_elements/lesson4.html"><span class="doc">an entire tutorial lesson devoted to the subject</span></a> in the
section on <a class="reference internal" href="../The_mechanical_elements/intro.html"><span class="doc">The Mechanical Elements</span></a>. Some
examples are:</p>
<ul class="simple">
<li><p>A general muscle working on a distance measure between two points
becomes simply a linear force provider, or in fact a reaction
provider in the sense that the force is not predetermined but will
become whatever equilibrium requires.</p></li>
<li><p>A general muscle working on an angular measure, for instance a joint
angle, becomes a torque provider.</p></li>
<li><p>A general muscle working on a Center of Mass measure becomes an
abstract force working on all segments of the body contributing to
the center of mass.</p></li>
</ul>
<p>This lesson demonstrates how general muscles can be used for a variety
of modeling tasks.</p>
<section id="muscles-as-joint-torque-providers">
<h2>Muscles as joint torque providers<a class="headerlink" href="#muscles-as-joint-torque-providers" title="Permalink to this heading">#</a></h2>
<p>One of the purposes of the AnyBody Modeling System is to be able to
model the musculoskeletal system to a realistic level of detail.
However, there is a place in the world for traditional inverse dynamics,
where the muscles are disregarded and the body is balanced entirely by
joint torques. This type of analysis can provide important information
about the function of limbs and joints, and it is extremely numerically
efficient.</p>
<p>Joint torque inverse dynamics can be accomplished by adding general
muscles to the joints to replace the physiological muscles of the body.
This way, the “muscle forces” computed in the general muscles will
simply be the joint torques.</p>
<p>The example from the preceding lessons is not well suited to play with joint
torques, so please <a class="reference download internal" download="" href="../_downloads/9f6a87f3ab96e977574c5e0800acdb81/MuscleDemo.6.any"><code class="xref download docutils literal notranslate"><span class="pre">download</span> <span class="pre">a</span> <span class="pre">new</span> <span class="pre">example</span> <span class="pre">to</span> <span class="pre">start</span> <span class="pre">on.</span></code></a>
This is in fact a simplified version of the simple
arm example from the <em>Getting Started with AnyScript</em> tutorial, where the
muscles have been removed. The model has two segments, an upper arm and a
forearm, and is attached to the global reference frame at the shoulder. It has a
100 N vertical load acting downwards at the hand.</p>
<p><img alt="Arm 2D" src="../_images/image18.jpeg" /></p>
<p>The lack of muscles means that the model cannot currently do an inverse
dynamics analysis. If you try to run the InverseDynamics operation, you will get the following error message:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>NOTICE(OBJ1): MuscleDemo.6.any(103): ArmStudy.InverseDynamics: No muscles in the model.
ERROR(OBJ1): MuscleDemo.6.any(103): ArmStudy.InverseDynamics: No solution found: There are fewer unknown forces (muscles and reactions) than dynamic equations.
</pre></div>
</div>
<p>which is a mathematical way of stating that the model cannot be balanced
in the absence of muscles. In this case we are not going to add real
muscles. Instead we shall add general muscles to the revolute joints.
The best way to introduce a general muscle is to insert it from the
class tree. Place the cursor after the Drivers folder, locate the
AnyGeneralMuscle in the class tree, and insert a template:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span>  <span class="kt">AnyFolder</span> <span class="n">Drivers</span> <span class="o">=</span> <span class="p">{</span>

   <span class="c1">//---------------------------------</span>
   <span class="kt">AnyKinEqSimpleDriver</span> <span class="n">ShoulderMotion</span> <span class="o">=</span> <span class="p">{</span>
     <span class="kt">AnyRevoluteJoint</span> <span class="o">&amp;</span><span class="n">Jnt</span> <span class="o">=</span> <span class="p">..</span><span class="n">Jnts</span><span class="p">.</span><span class="n">Shoulder</span><span class="p">;</span>
     <span class="n">DriverPos</span> <span class="o">=</span> <span class="p">{</span><span class="o">-</span><span class="mf">1.7</span><span class="p">};</span>
     <span class="n">DriverVel</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.4</span><span class="p">};</span>
     <span class="n">Reaction</span><span class="p">.</span><span class="n">Type</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
   <span class="p">};</span> <span class="c1">// Shoulder driver</span>

   <span class="c1">//---------------------------------</span>
   <span class="kt">AnyKinEqSimpleDriver</span> <span class="n">ElbowMotion</span> <span class="o">=</span> <span class="p">{</span>
     <span class="kt">AnyRevoluteJoint</span> <span class="o">&amp;</span><span class="n">Jnt</span> <span class="o">=</span> <span class="p">..</span><span class="n">Jnts</span><span class="p">.</span><span class="n">Elbow</span><span class="p">;</span>
     <span class="n">DriverPos</span> <span class="o">=</span> <span class="p">{</span><span class="mf">1.5</span><span class="p">};</span>
     <span class="n">DriverVel</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.7</span><span class="p">};</span>
     <span class="n">Reaction</span><span class="p">.</span><span class="n">Type</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
   <span class="p">};</span> <span class="c1">// Elbow driver</span>
 <span class="p">};</span> <span class="c1">// Driver folder</span>

<span class="gr">AnyGeneralMuscle &lt;ObjectName&gt; = {</span>
<span class="gr">   //ForceDirection = -1;</span>
<span class="gr">   AnyKinMeasure &amp;&lt;Insert name0&gt; = &lt;Insert object reference (or full object definition)&gt;;</span>
<span class="gr">   AnyMuscleModel &amp;&lt;Insert name0&gt; = &lt;Insert object reference (or full object definition)&gt;;</span>
<span class="gr"> };</span>
</pre></div>
</div>
<p>Just as normal muscles, general muscles must be associated with a muscle
model. Let us insert a simple one:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="gr">AnyMuscleModel &lt;ObjectName&gt; = {</span>
<span class="gr">   F0 = 0;</span>
<span class="gr">   //Lf0 = 0;</span>
<span class="gr">   //Vol0 = 0;</span>
<span class="gr"> };</span>

<span class="kt">AnyGeneralMuscle</span> <span class="o">&lt;</span><span class="n">ObjectName</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">{</span>
   <span class="c1">//ForceDirection = -1.000000;</span>
   <span class="kt">AnyKinMeasure</span> <span class="o">&amp;&lt;</span><span class="n">Insert</span> <span class="n">name0</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Insert</span> <span class="n">object</span> <span class="n">reference</span> <span class="p">(</span><span class="n">or</span> <span class="n">full</span> <span class="n">object</span> <span class="n">definition</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
   <span class="kt">AnyMuscleModel</span> <span class="o">&amp;&lt;</span><span class="n">Insert</span> <span class="n">name0</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">Insert</span> <span class="n">object</span> <span class="n">reference</span> <span class="p">(</span><span class="n">or</span> <span class="n">full</span> <span class="n">object</span> <span class="n">definition</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
 <span class="p">};</span>
</pre></div>
</div>
<p>The empty fields in the muscle model must be filled in:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyMuscleModel</span> <span class="gr">MusModel</span> <span class="o">=</span> <span class="p">{</span>
    <span class="gr">F0 = 100.0;</span>
  <span class="p">};</span>
</pre></div>
</div>
<p>Note that the simple muscle model class has the optional memebers (parameters) of Lf0 and Vol0 that are usually left out for use with AnyGeneralMuscle.</p>
<p>We shall associate the muscle with the shoulder joint:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyMuscleModel</span> <span class="n">MusModel</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">F0</span> <span class="o">=</span> <span class="mf">100.0</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="kt">AnyGeneralMuscle</span> <span class="gr">ShoulderTorque</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">//ForceDirection = -1;</span>
    <span class="kt">AnyKinMeasure</span> <span class="o">&amp;</span><span class="gr">Angle = .Jnts.Shoulder</span><span class="p">;</span>
    <span class="kt">AnyMuscleModel</span> <span class="o">&amp;</span><span class="gr">Model = .MusModel</span><span class="p">;</span>
  <span class="p">};</span>
</pre></div>
</div>
<p>Providing a torque for the shoulder is not enough. We also need a torque
in the elbow:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span> <span class="kt">AnyGeneralMuscle</span> <span class="n">ShoulderTorque</span> <span class="o">=</span> <span class="p">{</span>
   <span class="c1">//ForceDirection = -1;</span>
   <span class="kt">AnyKinMeasure</span> <span class="o">&amp;</span><span class="n">Angle</span> <span class="o">=</span> <span class="p">.</span><span class="n">Jnts</span><span class="p">.</span><span class="n">Shoulder</span><span class="p">;</span>
   <span class="kt">AnyMuscleModel</span> <span class="o">&amp;</span><span class="n">Model</span> <span class="o">=</span> <span class="p">.</span><span class="n">MusModel</span><span class="p">;</span>
 <span class="p">};</span>

<span class="gr">AnyGeneralMuscle ElbowTorque = {</span>
<span class="gr">   //ForceDirection = -1;</span>
<span class="gr">   AnyKinMeasure &amp;Angle = .Jnts.Elbow;</span>
<span class="gr">   AnyMuscleModel &amp;Model = .MusModel;</span>
<span class="gr"> };</span>
</pre></div>
</div>
<p>Having provided torques for the shoulder and elbow it should be possible
to run the inverse dynamic analysis. However, attempting to do so will
provide the same depressing error message as before. The reason is that
general muscles share the ability to be unilateral with normal muscles.
The direction of action is controlled by the variable ForceDirection. If
the muscle acts in the positive direction of the joint angle, then it
direction should be set = 1, and if it is in the negative joint angle
direction it should be -1. In the present case the external load tends
to work in the negative angle direction for the shoulder as well as the
elbow, and hence the muscles should counteract in the positive
direction:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span> <span class="kt">AnyGeneralMuscle</span> <span class="n">ShoulderTorque</span> <span class="o">=</span> <span class="p">{</span>
  <span class="gr">ForceDirection = 1</span><span class="p">;</span>
   <span class="kt">AnyKinMeasure</span> <span class="o">&amp;</span><span class="n">Angle</span> <span class="o">=</span> <span class="p">.</span><span class="n">Jnts</span><span class="p">.</span><span class="n">Shoulder</span><span class="p">;</span>
   <span class="kt">AnyMuscleModel</span> <span class="o">&amp;</span><span class="n">Model</span> <span class="o">=</span> <span class="p">.</span><span class="n">MusModel</span><span class="p">;</span>
 <span class="p">};</span>

<span class="kt">AnyGeneralMuscle</span> <span class="n">ElbowTorque</span> <span class="o">=</span> <span class="p">{</span>
  <span class="gr">ForceDirection = 1</span><span class="p">;</span>
   <span class="kt">AnyKinMeasure</span> <span class="o">&amp;</span><span class="n">Angle</span> <span class="o">=</span> <span class="p">.</span><span class="n">Jnts</span><span class="p">.</span><span class="n">Elbow</span><span class="p">;</span>
   <span class="kt">AnyMuscleModel</span> <span class="o">&amp;</span><span class="n">Model</span> <span class="o">=</span> <span class="p">.</span><span class="n">MusModel</span><span class="p">;</span>
 <span class="p">};</span>
</pre></div>
</div>
<p>Now the InverseDynamics operation can be run. Having done so, we can
open a new Chart View and look up the two joint torques as the Fm
property of the general muscles. We can plot both of them simultaneously
using an asterix as shown below:</p>
<p><img alt="Chart view, Torques" src="../_images/image23.gif" /></p>
<p>Notice that in this case we have used the same strength (muscle model)
for both joints. However, the maximum joint torque in physiological
joints varies a lot. The knee extension strength, for instance is
significantly larger than the elbow extension strength. If you perform
this type of modeling you can define joint torque muscles with strengths
comparable to the available joint torque and the system can give you an
estimate of how many percent of each joint’s strength is used in a given
situation. You can also define different strengths of extension and
flexion muscles in a given joint and thereby take for instance the
difference in strength in the knee in these two directions into account.</p>
<p><code class="docutils literal notranslate"><span class="pre">Important</span> <span class="pre">Remark:</span></code> Another useful property of the general muscles used as joint torque
providers is that you can handle <strong>closed loops</strong> and other statically
indeterminate situations, which are not treatable by traditional inverse
dynamics because the equilibrium equations do not have a unique
solution. The muscle recruitment algorithm will then distribute the load
between joints according to their individual strengths, and it is
therefore important to have reasonable estimates of joint strengths for
this type of situation.</p>
</section>
<section id="contact-and-other-boundary-conditions">
<h2>Contact and other boundary conditions<a class="headerlink" href="#contact-and-other-boundary-conditions" title="Permalink to this heading">#</a></h2>
<p>One of the characteristics of muscles is that they are unilateral, i.e.
they can only exert force in one direction. Mathematically this behavior
creates a significant amount of problems, but many mechanical phenomena
have the same characteristics, namely any kind of contact phenomenon.
Biomechanics is full of contact problems:</p>
<ul class="simple">
<li><p>The contact between a foot and the floor</p></li>
<li><p>The contact between the upper thighs and the seat of a chair</p></li>
<li><p>The contact between two articulating surfaces in a joint.</p></li>
</ul>
<p>There is another less appreciated similarity between muscle forces and
contact forces: neither is without limit. Muscle forces are obviously
limited by the strength of the muscle. Contact forces to the environment
may seem like they are only limited by the strength of whatever is
supporting the body, but it can also be limited by friction and by the
pressure on the contacting tissues; if you have a stone in one shoe you
will very likely put less weight on that foot than on the other.</p>
<p>So the muscles of the body in addition to creating equilibrium are
constrained by the available contact forces to the environment, and
these often have different limits in different directions, typically a
high limit in compression perpendicularly against the supporting
surface, a smaller limit for friction tangentially to the surface, and
no reaction available in tension. Mathematically and mechanically this
is very much how muscles work, and the conditions therefore affect the
mechanics of the entire system much like muscles do and can be mimicked
by means of general muscles.</p>
<p><img alt="Simple arm wall" src="../_images/image34.jpeg" /></p>
<p>We are going to make a couple of changes to the simple arm model to
investigate contact in more detail. We shall imagine that the hand of
the model has a vertical wall to support against. We have to change the
kinematics to make the arm slide along the wall. It would be really
difficult to figure out which joint angle variations are needed to make
the hand move vertically, so we drive the hand directly instead.</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span> <span class="kt">AnyFolder</span> <span class="n">Jnts</span> <span class="o">=</span> <span class="p">{</span>

   <span class="c1">//---------------------------------</span>
   <span class="kt">AnyRevoluteJoint</span> <span class="n">Shoulder</span> <span class="o">=</span> <span class="p">{</span>
     <span class="n">Axis</span> <span class="o">=</span> <span class="kp">z</span><span class="p">;</span>
     <span class="kt">AnyRefNode</span> <span class="o">&amp;</span><span class="n">GroundNode</span> <span class="o">=</span> <span class="p">..</span><span class="n">GlobalRef</span><span class="p">.</span><span class="n">Shoulder</span><span class="p">;</span>
     <span class="kt">AnyRefNode</span> <span class="o">&amp;</span><span class="n">UpperArmNode</span> <span class="o">=</span> <span class="p">..</span><span class="n">Segs</span><span class="p">.</span><span class="n">UpperArm</span><span class="p">.</span><span class="n">ShoulderNode</span><span class="p">;</span>
   <span class="p">};</span> <span class="c1">// Shoulder joint</span>

   <span class="kt">AnyRevoluteJoint</span> <span class="n">Elbow</span> <span class="o">=</span> <span class="p">{</span>
     <span class="n">Axis</span> <span class="o">=</span> <span class="kp">z</span><span class="p">;</span>
     <span class="kt">AnyRefNode</span> <span class="o">&amp;</span><span class="n">UpperArmNode</span> <span class="o">=</span> <span class="p">..</span><span class="n">Segs</span><span class="p">.</span><span class="n">UpperArm</span><span class="p">.</span><span class="n">ElbowNode</span><span class="p">;</span>
     <span class="kt">AnyRefNode</span> <span class="o">&amp;</span><span class="n">LowerArmNode</span> <span class="o">=</span> <span class="p">..</span><span class="n">Segs</span><span class="p">.</span><span class="n">LowerArm</span><span class="p">.</span><span class="n">ElbowNode</span><span class="p">;</span>
   <span class="p">};</span> <span class="c1">// Elbow joint</span>

 <span class="p">};</span> <span class="c1">// Jnts folder</span>

<span class="gr">AnyKinLinear HandPos = {</span>
<span class="gr">   AnyRefFrame &amp;ref1 = .GlobalRef.Shoulder;</span>
<span class="gr">   AnyRefFrame &amp;ref2 = .Segs.LowerArm.PalmNode;</span>
<span class="gr"> };</span>

 <span class="kt">AnyFolder</span> <span class="n">Drivers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="gr">AnyKinEqSimpleDriver HandDriver = {</span>
<span class="gr">     AnyKinLinear &amp;Measure = ..HandPos;</span>
<span class="gr">     MeasureOrganizer = {0,1};</span>
<span class="gr">     DriverPos = {0.45, -0.6};</span>
<span class="gr">     DriverVel = {0, 0.5};</span>
<span class="gr">     Reaction.Type = {0, 0};</span>
<span class="gr">   };</span>

 <span class="gr"> /*</span>
   <span class="c1">//---------------------------------</span>
   <span class="kt">AnyKinEqSimpleDriver</span> <span class="n">ShoulderMotion</span> <span class="o">=</span> <span class="p">{</span>
      <span class="kt">AnyRevoluteJoint</span> <span class="o">&amp;</span><span class="n">Jnt</span> <span class="o">=</span> <span class="p">..</span><span class="n">Jnts</span><span class="p">.</span><span class="n">Shoulder</span><span class="p">;</span>
      <span class="n">DriverPos</span> <span class="o">=</span> <span class="p">{</span><span class="o">-</span><span class="mf">1.7</span><span class="p">};</span>
      <span class="n">DriverVel</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.4</span><span class="p">};</span>
      <span class="n">Reaction</span><span class="p">.</span><span class="n">Type</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
   <span class="p">};</span> <span class="c1">// Shoulder driver</span>

   <span class="c1">//---------------------------------</span>
   <span class="kt">AnyKinEqSimpleDriver</span> <span class="n">ElbowMotion</span> <span class="o">=</span> <span class="p">{</span>
      <span class="kt">AnyRevoluteJoint</span> <span class="o">&amp;</span><span class="n">Jnt</span> <span class="o">=</span> <span class="p">..</span><span class="n">Jnts</span><span class="p">.</span><span class="n">Elbow</span><span class="p">;</span>
      <span class="n">DriverPos</span> <span class="o">=</span> <span class="p">{</span><span class="mf">1.5</span><span class="p">};</span>
      <span class="n">DriverVel</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.7</span><span class="p">};</span>
      <span class="n">Reaction</span><span class="p">.</span><span class="n">Type</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
   <span class="p">};</span> <span class="c1">// Elbow driver</span>

 <span class="gr">*/</span>

 <span class="p">};</span> <span class="c1">// Driver folder</span>
</pre></div>
</div>
<p>Notice that the previous two joint angle drivers have been disabled.
Otherwise the system would become kinematically over-determinate. Notice
also that the new driver drives two degrees of freedom corresponding
exactly to the two drivers we have disabled. Finally, please notice the
line</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="n">Reaction</span><span class="p">.</span><span class="n">Type</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span>
</pre></div>
</div>
<p>which means that the wall presently provides no reaction forces to the
arm. Plotting the MaxMuscleActivity provides the following result:</p>
<p><img alt="no reaction MaxMuscleActivity plot" src="../_images/image41.gif" /></p>
<p>The muscle activity is rather constant which is the natural consequence
of the moment arms being rather constant. The gravity as well as the
applied load of 100 N are vertical, so one might be tempted to think
that a horizontal support would not make much of a difference. We can do
a quick test by simply switching on the horizontal support of the
driver:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="n">Reaction</span><span class="p">.</span><span class="n">Type</span> <span class="o">=</span> <span class="p">{</span><span class="gr">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span>
</pre></div>
</div>
<p>This produces immediate proof that mechanics is usually more complicated
than expected; even this very simple mechanical system behaves
differently from what we might expect:</p>
<p><img alt="Full reaction MaxMuscleActivity plot" src="../_images/image51.gif" /></p>
<p>Notice that the muscle activity is much smaller in the beginning of the
movement with the reaction switched on and much the same towards the end
of the movement. It seems like the muscles are able to use the
horizontal reaction force to their advantage depending on the posture of
the mechanism.</p>
<p>Walls in general do not work like that; they can only provide reaction
pressure but no tension. This we can mimic with general a muscle. We
first switch the reaction off again:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="n">Reaction</span><span class="p">.</span><span class="n">Type</span> <span class="o">=</span> <span class="p">{</span><span class="gr">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span>
</pre></div>
</div>
<p>Subsequently we define a general muscle:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span> <span class="kt">AnyMuscleModel</span> <span class="n">MusModel</span> <span class="o">=</span> <span class="p">{</span>
   <span class="n">F0</span> <span class="o">=</span> <span class="mf">100.0</span><span class="p">;</span>
 <span class="p">};</span>

<span class="gr">AnyMuscleModel ReacModel = {</span>
<span class="gr">   F0 = 10000.0;</span>
<span class="gr"> };</span>

<span class="gr"> AnyGeneralMuscle WallReaction = {</span>
<span class="gr">   ForceDirection = -1;</span>
<span class="gr">   AnyKinMeasureOrg Org = {</span>
<span class="gr">     AnyKinMeasure &amp;wall = ..HandPos;</span>
<span class="gr">     MeasureOrganizer = {0};</span>
<span class="gr">   };</span>
<span class="gr">   AnyMuscleModel &amp;Model = .ReacModel;</span>
<span class="gr"> };</span>
</pre></div>
</div>
<p>There are two things to notice here</p>
<ol class="arabic simple">
<li><p>The muscle model for the reaction, ReacModel, is much stronger than
the joint muscles. This is because the wall is presumed to be very
strong.</p></li>
<li><p>The ForceDirection property equals -1. This means that the force is
working in the opposite direction of the Kinematic measure, i.e. in
the negative global x direction, just like a contact force with the
wall would do.</p></li>
</ol>
<p>Running the InverseDynamics operation again and plotting the two joint
torques provides the following graph (notice they can be plotted
simultaneously with the specification line
<code class="docutils literal notranslate"><span class="pre">Main.ArmStudy.Output.Model.*Torque.Fm</span></code>):</p>
<p><img alt="Joint torques plot" src="../_images/image61.gif" /></p>
<p>The red curve is the shoulder joint torque, and the green curve is the
elbow torque. Notice that the envelope of these two curves is in fact
identical to the MaxMuscleActivity curve we plotted above for the case
of no support. You would think that the support would be beneficial in
the final stages of the movement where the arm could rest a bit against
the wall. Actually, it is beneficial for the elbow, but the reaction
force also increases the torque about the shoulder, and since the
shoulder (red curve) has the higher load of the two, this limits the
benefit of the support. Let us see what happens if we turn the reaction
force the other way like if the hand could pull against the far side of
the wall:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyGeneralMuscle</span> <span class="n">WallReaction</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">ForceDirection</span> <span class="o">=</span> <span class="gr">1</span><span class="p">;</span>
  <span class="kt">AnyKinMeasureOrg</span> <span class="n">Org</span> <span class="o">=</span> <span class="p">{</span>
    <span class="kt">AnyKinMeasure</span> <span class="o">&amp;</span><span class="n">wall</span> <span class="o">=</span> <span class="p">..</span><span class="n">HandPos</span><span class="p">;</span>
    <span class="n">MeasureOrganizer</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
  <span class="p">};</span>
  <span class="kt">AnyMuscleModel</span> <span class="o">&amp;</span><span class="n">Model</span> <span class="o">=</span> <span class="p">.</span><span class="n">ReacModel</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>If you run the model again and plot the same graphs, you will see this:</p>
<p><img alt="Joint torques plot 2" src="../_images/image7.gif" /></p>
<p>The wall is obviously useful in the initial stages of the movement where
the torque generated by the reaction force is in the beneficial
direction for both joints. In the later stages of the movement the
presence of the wall decreases the envelope of the muscle forces
slightly, but it has increased the torque in the elbow. The explanation
is that the elbow can increase its action beyond what is necessary to
carry the load and generate an additional pressure against the wall,
which then decreases the torque in the shoulder.</p>
<p>This example shows how complicated the mechanics of the body is. Even
this very simplified case would have different solutions if the
parameters of the model were different. For instance if the shoulder
were much stronger compared to the elbow, then the elbow would not have
been able to help the shoulder in the latter case because the elbow
would have the higher load compared to its strength. On the contrary,
the shoulder would have been able to help the elbow in the former case
by generating an additional force pushing against the wall.</p>
<p>This completes the part of this tutorial dealing with muscles. But we
are not completely finished yet. The <a class="reference internal" href="lesson7.html"><span class="doc">next lesson</span></a>
deals with the important topic of ligament modeling.</p>
</section>
</section>


                </article>
              

              
              
                <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="lesson5.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Lesson 5: Muscle Models</p>
      </div>
    </a>
    <a class="right-next"
       href="lesson7.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lesson 7: Ligaments</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#muscles-as-joint-torque-providers">Muscles as joint torque providers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#contact-and-other-boundary-conditions">Contact and other boundary conditions</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By AnyBody Technology
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023, AnyBody Technology.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>
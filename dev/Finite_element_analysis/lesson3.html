
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<meta content="noindex" name="robots" />

<meta property="og:title" content="Lesson 3: Abaqus Interface" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="https://anyscript.org/Finite_element_analysis/lesson3.html" />
  
<meta property="og:site_name" content="AnyScript Tutorials" />
  
<meta property="og:description" content="This chapter shows how forces calculated in AnyBody can be applied as boundary conditions to a FE Models generated for Abaqus. Below you see the flowchart from the introduction of this tutorial ext..." />
  
<meta property="og:image" content="https://anyscript.org/_images/image115.png" />
  
<meta property="og:image:alt" content="clavicula ref frame" />
  
    <title>Lesson 3: Abaqus Interface &#8212; AnyBody Tutorials v7.4.0-dev</title>
  <script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">

  
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/6.1.2/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=6aa211a80e8e0ad13c9f98b61f85fb78546ea56f" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=4f5a1d078b6c00e5ef435388cc61494d2f099c28"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Finite_element_analysis/lesson3';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Making Models using SOLIDWORKS" href="../AnyExp4SOLIDWORKS/index.html" />
    <link rel="prev" title="Lesson 2: ANSYS Interface" href="lesson2.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  


  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        


    <div class="bd-sidebar__content">
        <div class="sidebar-start-items"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/AnyBodyTutorials2.svg" class="logo" alt="logo">
      
      
    </a>
</div>
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../GettingStarted.html">
   <strong>
    Getting Started
   </strong>
  </a>
  <input checked class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label class="toctree-toggle" for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../A_Getting_started/index.html">
     Getting Started - First steps
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started/intro.html">
       Getting Started Tutorial
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started/lesson1.html">
       Lesson 1: Creating a Standing Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started/lesson2.html">
       Lesson 2: Controlling the Posture
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started/lesson3.html">
       Lesson 3: Reviewing Analysis Results
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../A_Getting_started_anyscript/index.html">
     How to write AnyScript
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started_anyscript/intro.html">
       Introduction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started_anyscript/lesson1.html">
       Lesson 1: Basic Concepts
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started_anyscript/lesson2.html">
       Lesson 2: Defining Segments and Displaying Objects
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started_anyscript/lesson3.html">
       Lesson 3: Connecting Segments by Joints
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started_anyscript/lesson4.html">
       Lesson 4: Imparting movement with Drivers
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started_anyscript/lesson5.html">
       Lesson 5: Definition of Muscles and External Forces
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started_anyscript/lesson6.html">
       Lesson 6: Adding Real Bone Geometries
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../A_Getting_started_modeling/index.html">
     Modelling the Human body
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started_modeling/intro.html">
       Introduction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started_modeling/lesson1.html">
       Lesson 1: Starting with a New Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started_modeling/lesson2.html">
       Lesson 2: Adjusting the Human Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started_modeling/lesson3.html">
       Lesson 3: Making Ends Meet
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_Getting_started_modeling/lesson4.html">
       Lesson 4: Kinetics - Computing Forces
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../A_Getting_started_AMMR/index.html">
     The AnyBody Model Repository
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference external" href="https://anyscript.org/ammr-doc/creating_model_from_scratch.html">
       Creating a Human Model from scratch
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference external" href="https://anyscript.org/ammr-doc/Scaling/lesson1.html">
       Scaling: Joint to joint scaling
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference external" href="https://anyscript.org/ammr-doc/Scaling/lesson2.html">
       Scaling: External Body Measurements
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference external" href="https://anyscript.org/ammr-doc/Scaling/lesson3.html">
       Scaling: Segmental scaling factors
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../Tutorials.html">
   <strong>
    Tutorials
   </strong>
  </a>
  <input checked class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label class="toctree-toggle" for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../A_study_of_studies/index.html">
     A Study of Studies
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_study_of_studies/intro.html">
       Introduction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_study_of_studies/lesson1.html">
       Lesson1: Mechanical System Information
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_study_of_studies/lesson2.html">
       Lesson2: Initial Conditions
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_study_of_studies/lesson3.html">
       Lesson 3: Kinematic Analysis
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../A_study_of_studies/lesson4.html">
       Lesson 4: Inverse Dynamics
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../Making_things_move/index.html">
     Making things move
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../Making_things_move/intro.html">
       Introduction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Making_things_move/lesson1.html">
       Lesson1: Simple drivers
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Making_things_move/lesson2.html">
       Lesson 2: Using motion capture data
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Making_things_move/lesson3.html">
       Lesson3: Noise and filters
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Making_things_move/lesson4.html">
       Lesson 4: Parameter identification
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Making_things_move/lesson5.html">
       Lesson 5: Using real data
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Making_things_move/lesson6.html">
       Lesson 6: Troubleshooting C3D files
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../MuscleRecruitment/index.html">
     Inverse Dynamics of Muscle Systems
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../MuscleRecruitment/Inverse_dynamics.html">
       Introduction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../MuscleRecruitment/lesson1.html">
       Lesson 1: The Basics of Muscle Recruitment
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../MuscleRecruitment/lesson2.html">
       Lesson 2: Linear Muscle Recruitment
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../MuscleRecruitment/lesson3.html">
       Lesson 3: Quadratic Muscle Recruitment
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../MuscleRecruitment/lesson4.html">
       Lesson 4: Polynomial Muscle Recruitment
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../MuscleRecruitment/lesson5.html">
       Lesson 5: Min/Max Muscle Recruitment
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../MuscleRecruitment/lesson6.html">
       Lesson 6: Composite Recruitment Criteria
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../MuscleRecruitment/lesson_calibration.html">
       Lesson 7: Calibration
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../Muscle_modeling/index.html">
     Muscle Modeling
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../Muscle_modeling/intro.html">
       Introduction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Muscle_modeling/lesson1.html">
       Lesson 1: The Basics of Muscle Definition
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Muscle_modeling/lesson2.html">
       Lesson 2: Controlling Muscle Drawing
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Muscle_modeling/lesson3.html">
       Lesson 3: Via-point Muscles
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Muscle_modeling/lesson4.html">
       Lesson 4: Wrapping Muscles
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Muscle_modeling/lesson5.html">
       Lesson 5: Muscle Models
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Muscle_modeling/lesson6.html">
       Lesson 6: General Muscles
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Muscle_modeling/lesson7.html">
       Lesson 7: Ligaments
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../The_mechanical_elements/index.html">
     The Mechanical Elements
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-11">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../The_mechanical_elements/intro.html">
       Introduction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../The_mechanical_elements/lesson1.html">
       Lesson 1: Segments
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../The_mechanical_elements/lesson2.html">
       Lesson 2: Joints
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../The_mechanical_elements/lesson3.html">
       Lesson 3: Drivers
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../The_mechanical_elements/lesson4.html">
       Lesson 4: Kinematic Measures
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../The_mechanical_elements/lesson5.html">
       Lesson 5: Forces
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../ForceDependentKinematics/index.html">
     Force-Dependent Kinematics
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../ForceDependentKinematics/fdk.html">
       Introduction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../ForceDependentKinematics/lesson1.html">
       Lesson 1: The Baseline Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../ForceDependentKinematics/lesson2.html">
       Lesson 2: Adding FDK Features
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../ForceDependentKinematics/lesson3.html">
       Lesson 3: Results of FDK
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../ForceDependentKinematics/lesson4.html">
       Lesson 4: Using Surfaces to Define the Knee Joint
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../ForceDependentKinematics/lesson5.html">
       Lesson 5: Using Contact Forces to Replace a Joint in a Human Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../ForceDependentKinematics/fdkappendix.html">
       FDK appendix
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../Parameter_studies_and_optimization/index.html">
     Parameter Studies and Optimization
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../Parameter_studies_and_optimization/intro.html">
       Introduction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Parameter_studies_and_optimization/lesson1.html">
       Defining a Parameter Study
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Parameter_studies_and_optimization/lesson2.html">
       Optimization Studies
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Parameter_studies_and_optimization/lesson3.html">
       Optimization Studies in Python
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="index.html">
     Finite Element Analysis Interfacing
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-14">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="lesson1.html">
       Lesson 1: Export of data for FEA
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="lesson2.html">
       Lesson 2: ANSYS Interface
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Lesson 3: Abaqus Interface
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../AnyExp4SOLIDWORKS/index.html">
     Making Models using SOLIDWORKS
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-15">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../AnyExp4SOLIDWORKS/lesson1.html">
       Translating a SOLIDWORKS CAD model to AnyBody
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../AnyExp4SOLIDWORKS/lesson2.html">
       Making the translated AnyScript model move
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../AnyExp4SOLIDWORKS/lesson3.html">
       Creating human-machine integrated analysis model
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../Scaling/index.html">
     Scaling and Personalizing your model
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-16">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../Scaling/lesson3.html">
       Lesson 1: Scaling based on medical images
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
      <label class="toctree-toggle" for="toctree-checkbox-17">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../Scaling/lesson3_appendix.html">
         Lesson 1 appendix
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Scaling/lesson4.html">
       Lesson 2: Including a custom scaling function into your model
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Posture_and_movement/intro.html">
     Posture and Movement Prediction
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../Interface_features/index.html">
     User interface features
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-18">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../Interface_features/intro.html">
       Introduction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Interface_features/lesson1.html">
       Lesson 1: The Editor Window
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Interface_features/lesson2.html">
       Lesson 2: The Model View Window
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Interface_features/lesson3.html">
       Lesson 3: The Chart View
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Interface_features/lesson4.html">
       Lesson 4: The Model Tree and Object Description
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Interface_features/lesson5.html">
       Lesson 5: The Command Line Application
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Interface_features/lesson6.html">
       Lesson 6: Modifying the Loaded Model
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Interface_features/lesson7.html">
       Lesson 7: Wrapping the Model with AnyBody Project
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../Advanced_script_features/index.html">
     Advanced Script Features
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-19">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../Advanced_script_features/lesson1.html">
       Lesson 1: Using References
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Advanced_script_features/lesson2.html">
       Lesson 2: Using Include Files
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Advanced_script_features/lesson3.html">
       Lesson 3: Mathematical Expressions
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../Troubleshooting_anyscript/intro.html">
     Trouble Shooting AnyScript Models
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../Validation_of_models/index.html">
     Validation of Models
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/>
    <label class="toctree-toggle" for="toctree-checkbox-20">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../Validation_of_models/intro.html">
       Introduction to validation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../Validation_of_models/Kinematic_input.html">
       Validating Kinematic input
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../about.html">
   <strong>
    About
   </strong>
  </a>
  <input checked class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/>
  <label class="toctree-toggle" for="toctree-checkbox-21">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../contributing.html">
     Help improve tutorials
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../legal.html">
     Legal, Trademarks and Copyrights
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav>
        </div>
        <div class="sidebar-end-items">
             <!-- To handle the deprecated key -->
            
                <div class="navbar_extra_footer">
                Tutorials by <a href="https://anybodytech.com">AnyBody Technology</a>
                </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>


      </div>
      <main class="bd-main">
        
        
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>

        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__primary"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/anybody/anybody-tutorial/issues/new?title=Issue%20on%20page%20%2FFinite_element_analysis/lesson3.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/anybody/anybody-tutorial/edit/master/Finite_element_analysis/lesson3.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

    </div>
</div>
            </div>
            
            
<!-- Table of contents that is only displayed when printing the page -->
<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lesson 3: Abaqus Interface</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

            <article class="bd-article" role="main">
              
  <section class="tex2jax_ignore mathjax_ignore" id="lesson-3-abaqus-interface">
<h1>Lesson 3: Abaqus Interface<a class="headerlink" href="#lesson-3-abaqus-interface" title="Permalink to this heading">#</a></h1>
<p>This chapter shows how forces calculated in AnyBody can be applied as
boundary conditions to a FE Models generated for Abaqus.</p>
<p>Below you see the flowchart from the introduction of this tutorial
extended with a converter step that converts the AnyFE output file to a
format readable by Abaqus. This step is carried out by a small tool,
called AnyFE2Abaqus.exe, which is available at <a class="reference external" href="https://www.anybodytech.com/resources/customer-downloads#fe-interface-tools">AnyBody Technology webpage</a>.</p>
<p>The model we will have a look at is a model of the claviclebone. We will
analyze the muscle forces acting on the clavicle during lifting an arm
and compute the stresses in the bone. The standard Standing model taken
from the AMMR will be used (Notice, this tutorial was authored with
AMMRV1.3.1. It should run equally well with newer versions of the AMMR,
but the results may vary due to updates of the models).</p>
<p>We shall focus on the interfacing between AnyBody and Abaqus and
therefore we will use a bone mesh derived from the standard scaled
(=un-scaled) AnyBody model. Thereby, we can skip the step to do any
scaling according to the subject data and in particular the bone
geometry. This would have been needed if the bone model was derived from
scanned data coming from another, significantly different, person than
generic AnyBody model.</p>
<p>Let’s start with the AnyBody model. We have to make sure the FE and
AnyBody models are aligned. The idea is to include local reference
frames in both systems which will be used for all further data transfer.
Open the Standing model from the AMMR, or better make a copy of the
whole model folder and use this one. For convenience we will reduce the
model detail by excluding the left arm and switching off the muscles in
all body parts, except the right arm. This is done in the
BodyPartsSetup.any file.</p>
<p>Next we define the local ref frame on the clavicle. All forces will be
later exported with respect to this coordinate system. You can either
use a pre-defined reference system in the AMS or create a new one. The
following lines create a new node located in the Sternoclavicular joint:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnySeg</span> <span class="o">&amp;</span><span class="n">RiArm</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">HumanModel</span><span class="p">.</span><span class="n">BodyModel</span><span class="p">.</span><span class="n">Right</span><span class="p">.</span><span class="n">ShoulderArm</span><span class="p">.</span><span class="n">Seg</span><span class="p">.</span><span class="n">Clavicula</span><span class="p">;</span>
<span class="n">RiArm</span> <span class="o">=</span> <span class="p">{</span>
    <span class="kt">AnyRefNode</span> <span class="n">localrefframe</span><span class="o">=</span> <span class="p">{</span>
        <span class="n">sRel</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">};</span>
        <span class="c1">// ARel = RotMat(0.5*pi,x);</span>
        <span class="kt">AnyDrawRefFrame</span> <span class="n">drws</span> <span class="o">=</span> <span class="p">{</span><span class="n">ScaleXYZ</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">}</span><span class="o">*</span><span class="mf">0.3</span><span class="p">;</span><span class="n">RGB</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">};};</span>
    <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Include them e.g. in the Environment file. After reload of the model the
reference frame is shown</p>
<p><img alt="clavicula ref frame" src="../_images/image115.png" /></p>
<p>Download the prepared Abaqus file <a class="reference download internal" download="" href="../_downloads/591e0a352b179354933064180ab125f3/clavicula.inp"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a> and
save it in your working directory. Please note that this FE model of
clavicle was created in the same reference frame as the clavicle model
in the AnyBody model, since we have actually used the STL exported from
AMMR for this bone. Therefore, ‘localrefframe’ does not have to be
displaced in order to match with the coordinate system of the FE mesh,
but had the FE mesh been generated based on scanned data, the
registration between AnyBody model’s clavicle and the FE mesh can be
entered using <code class="docutils literal notranslate"><span class="pre">localrefframe</span></code>’s sRel and Arel members.</p>
<p>In a similar manner one could define a local reference frame in Abaqus
by means of the <code class="docutils literal notranslate"><span class="pre">*SYSTEM</span></code> keyword; however, this is not advisable because
the AnyFE Converter does not handle the <code class="docutils literal notranslate"><span class="pre">*SYSTEM</span></code> keyword in the supplied
mesh file. We shall return to the issue of aligning the coordinate
systems for the AnyBody forces and the mesh later, and so far we
consider <code class="docutils literal notranslate"><span class="pre">localrefframe</span></code> to be aligned with the mesh coordinate system.</p>
<p><img alt="Clavicula mesh" src="../_images/image212.png" /></p>
<p>This figure above shows the clavicle bone mesh used for this example.
This bone is modeled with a reduced stiffness, which can be interpreted
as an osteoporotic bone.</p>
<p>Next we want to analyze the behavior of the bone subjected to the forces
computed in the AMS. First, change the Mannequin file to create the
desired physical activity. We want to analyze a simple lifting case, so
all we specify is flexion in the shoulder joint. Open the Mannequin file
and look for the PostureVel folder. Change the Glenohumeral flexion
value to 50/<code class="docutils literal notranslate"><span class="pre">Main.Study.tEnd</span></code>, this determines the joint velocity
necessary to reach 50 degree flexion taking into account the simulation
time.</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyFolder</span> <span class="n">Right</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">//Arm</span>
    <span class="kt">AnyVar</span> <span class="n">SternoClavicularProtraction</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="c1">//This value is not used for initial position</span>
    <span class="kt">AnyVar</span> <span class="n">SternoClavicularElevation</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="c1">//This value is not used for initial position</span>
    <span class="kt">AnyVar</span> <span class="n">SternoClavicularAxialRotation</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="c1">//This value is not used for initial position</span>
    <span class="kt">AnyVar</span> <span class="n">GlenohumeralFlexion</span> <span class="o">=</span><span class="mi">50</span><span class="o">/</span><span class="n">Main</span><span class="p">.</span><span class="n">Study</span><span class="p">.</span><span class="n">tEnd</span><span class="p">;</span>
</pre></div>
</div>
<p>We also want to alter the initial starting position for the motion,
enter the Posture position folder and make the changes indicated below.</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyFolder</span> <span class="n">Right</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">//Arm</span>
    <span class="kt">AnyVar</span> <span class="n">SternoClavicularProtraction</span><span class="o">=-</span><span class="mi">23</span><span class="p">;</span> <span class="c1">//This value is not used for initial position</span>
    <span class="kt">AnyVar</span> <span class="n">SternoClavicularElevation</span><span class="o">=</span><span class="mf">11.5</span><span class="p">;</span> <span class="c1">//This value is not used for initial position</span>
    <span class="kt">AnyVar</span> <span class="n">SternoClavicularAxialRotation</span><span class="o">=-</span><span class="mi">20</span><span class="p">;</span> <span class="c1">//This value is not used for initial position</span>
    <span class="kt">AnyVar</span> <span class="n">GlenohumeralFlexion</span> <span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="kt">AnyVar</span> <span class="n">GlenohumeralAbduction</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
    <span class="kt">AnyVar</span> <span class="n">GlenohumeralExternalRotation</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kt">AnyVar</span> <span class="n">ElbowFlexion</span> <span class="o">=</span> <span class="mf">5.0</span><span class="p">;</span>
    <span class="kt">AnyVar</span> <span class="n">ElbowPronation</span> <span class="o">=</span> <span class="o">-</span><span class="mf">20.0</span><span class="p">;</span>
</pre></div>
</div>
<p>We want this motion to be done in 10 seconds and analyze 5 time steps.
This is set in the main file. Search the Study folder and change the end
time of the study to 10 seconds and the number of time steps to 5.</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyBodyStudy</span> <span class="n">Study</span> <span class="o">=</span> <span class="p">{</span>
    <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">Model</span> <span class="o">=</span> <span class="p">.</span><span class="n">Model</span><span class="p">;</span>
    <span class="n">tEnd</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span>
    <span class="n">Gravity</span> <span class="o">=</span> <span class="p">{</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.81</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">};</span>
    <span class="n">nStep</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</pre></div>
</div>
<p>Now we have to specify which forces we want to export to the FE model.
For this we make use of the Class inserter. Place you cursor in the
Study folder in the main file, below the code shown above and select the
Classes tab on the left side of the main file window. Search for the
class named AnyMechOutputFileForceExport right click on it and choose
<em>Insert class template.</em> This will insert the class necessary for force
export.</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyMechOutputFileForceExport</span> <span class="o">&lt;</span><span class="n">ObjectName</span><span class="o">&gt;</span> <span class="o">=</span>
<span class="p">{</span>
    <span class="n">FileName</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
    <span class="cm">/*NumberFormat =</span>
<span class="cm">    {</span>
<span class="cm">        Digits = 15;</span>
<span class="cm">        Width = 22;</span>
<span class="cm">        Style = ScientificNumber;</span>
<span class="cm">        FormatStr = &quot;&quot;;</span>
<span class="cm">    };*/</span>
    <span class="c1">//UseRefFrameOnOff = Off;</span>
    <span class="c1">//AllSegmentsInStudyOnOff = Off;</span>
    <span class="c1">//XMLformatOnOff = Off;</span>
    <span class="c1">//AnyRefFrame &amp;&lt;Insert name0&gt; = &lt;Insert object reference (or full object definition)&gt;; You can make any number of these objects!</span>
    <span class="c1">//AnySeg &amp;&lt;Insert name0&gt; = &lt;Insert object reference (or full object definition)&gt;; You can make any number of these objects!</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Create a folder in your Standing model folder named <code class="docutils literal notranslate"><span class="pre">files_in</span></code> and one
called <code class="docutils literal notranslate"><span class="pre">files_out</span></code>. This will be used to store the FE files. Change the
<code class="docutils literal notranslate"><span class="pre">FE_out</span></code> object as shown below. These definitions specify that all forces
acting on the segment Clavicula will be written in the xml file
clavload. It is important to use the xml format, since the AnyFE
converter only reads this format.</p>
<p>The UseRefFrameOnOff option enables specification of a reference frame
in which all forces and positions are reported. Switch this option on
and name the ref frame (the one we created before). You can find the
path to the ref frame by browsing the model tree on the left side of the
main file window to the right clavicle and right click <em>Insert object
name.</em></p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyMechOutputFileForceExport</span> <span class="n">FE_out</span> <span class="o">=</span>
<span class="p">{</span>
    <span class="n">FileName</span> <span class="o">=</span> <span class="s">&quot;files_in/clavload.xml&quot;</span><span class="p">;</span>
    <span class="n">UseRefFrameOnOff</span> <span class="o">=</span> <span class="kp">On</span><span class="p">;</span>
    <span class="kt">AnyRefFrame</span> <span class="o">&amp;</span><span class="n">ref1</span> <span class="o">=</span>
    <span class="n">Main</span><span class="p">.</span><span class="n">HumanModel</span><span class="p">.</span><span class="n">BodyModel</span><span class="p">.</span><span class="n">Right</span><span class="p">.</span><span class="n">ShoulderArm</span><span class="p">.</span><span class="n">Seg</span><span class="p">.</span><span class="n">Clavicula</span><span class="p">.</span><span class="n">localrefframe</span><span class="p">;</span>
    <span class="n">AllSegmentsInStudyOnOff</span> <span class="o">=</span> <span class="kp">Off</span><span class="p">;</span>
    <span class="n">XMLformatOnOff</span> <span class="o">=</span> <span class="kp">On</span><span class="p">;</span>
    <span class="c1">//AllSegmentsInStudyOnOff = Off;</span>
    <span class="kt">AnySeg</span> <span class="o">&amp;</span><span class="n">clav</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">HumanModel</span><span class="p">.</span><span class="n">BodyModel</span><span class="p">.</span><span class="n">Right</span><span class="p">.</span><span class="n">ShoulderArm</span><span class="p">.</span><span class="n">Seg</span><span class="p">.</span><span class="n">Clavicula</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>This object will write all the muscle and joint forces for all time
steps in one xml file.</p>
<p>We are now ready to execute the AnyFE converter and transform the
generic AnyFE XML file to an Abaqus readable INP file. The AneFE
converter tool is available at
the <a class="reference external" href="https://www.anybodytech.com/resources/customer-downloads#fe-interface-tools">AnyBody Technology webpage</a>. Unpack
the files in your model folder. These files include the AnyFE converter,
which is an executable called AnyFE2Abq.exe. It can convert the xml code
to Abaqus keyword sequence and combine it with the FE model.</p>
<p>The AnyFE converter is a command line tool with options controlled by
program arguments. Running the program with the <code class="docutils literal notranslate"><span class="pre">–h</span></code>, i.e.
<code class="docutils literal notranslate"><span class="pre">AnyFE2Abq.exe</span> <span class="pre">–h</span></code>. We shall briefly go through the important options
here.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">–i</span></code> and <code class="docutils literal notranslate"><span class="pre">–o</span></code> options specify the input AnyFE xml file
(<code class="docutils literal notranslate"><span class="pre">-i</span></code>) and the output file (<code class="docutils literal notranslate"><span class="pre">-o</span></code>), respectively. The <code class="docutils literal notranslate"><span class="pre">–m</span></code>
option is used to specify a FE model without boundary conditions. This
Abaqus INP file, containing the mesh only, will be included in the
converter output INP file by means of an include-statement.</p>
<p>Another significant option is <code class="docutils literal notranslate"><span class="pre">–e</span></code>, which is the radius of
muscle/ligament attachment area. This radius (default value is 1 cm) is
used for the construction of coupling constraint between a loaded point
and the surface of the bone. Please note that this radius is used on all
loads applied, not only muscles and ligaments, but also joint reactions,
applied loads, etc. This parameter is not a physiological parameter.
Please also note that in case of complex concave geometries these
constraints may select wrong parts of the bone surface and may require
some manual adjustment.</p>
<p>You can call the converter either from a shell prompt or from inside the
AnyBody system. The latter can be done by using the following class:
AnyOperationShellExec. The names for the executable, its working
directory and the options for the call of the exe file have to be given.
Please adjust the path corresponding to your setup and insert this code
below the study folder:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyOperationShellExec</span> <span class="n">ConvertToAbq</span><span class="o">=</span><span class="p">{</span>
    <span class="n">Show</span><span class="o">=</span><span class="kp">On</span><span class="p">;</span>
    <span class="n">FileName</span> <span class="o">=</span> <span class="s">&quot;AnyFE2Abq.exe&quot;</span><span class="p">;</span>
    <span class="n">Arguments</span> <span class="o">=</span> <span class="s">&quot;-i ..</span><span class="se">\f</span><span class="s">iles_in\clavload.xml -o ..</span><span class="se">\f</span><span class="s">iles_out\output.inp -m .\clavicula.inp&quot;</span><span class="p">;</span>
    <span class="n">WorkDir</span><span class="o">=</span><span class="s">&quot;.\ &quot;</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>This will enter an operation called ‘ ConvertToAbq’ into the model and
running this will execute the AnyFE converter. From the shell prompt you
write the following to get the same result:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>AnyFE2Abq.exe -i ..\files_in\clavload.xml -o ..\files_out\output.inp -m .\clavicula.inp
</pre></div>
</div>
<p>At this point, let us return to the issue of the coordinate systems that
we have used so far and an alternative option. In the example we have
exported all the positions and forces with reference to a given manually
defined system attached to the clavicle, i.e. the ‘localrefframe’. The
AnyFE converter will by default will transfer all positions and forces
directly, i.e., in the same coordinate system as exported the AnyFE XML
file. In the above, we have therefore considered ‘localrefframe’ to be
the coordinate system of the FE model, which is also the CT/MRI scan
system. Notice that in the given case, the segment reference and the
output reference are aligned since the FE mesh was based on the original
bone geometry from the AnyBody model, i.e. <code class="docutils literal notranslate"><span class="pre">sRel=</span> <span class="pre">{0,</span> <span class="pre">0,</span> <span class="pre">0}</span></code>.</p>
<p>As an alternatively, you can export the AnyFE XML file in another
reference frame, even the global system in AnyBody
(UseRefFrameOnOff=Off) for that matter. This implies that the data of
the AnyFE XML file may or may not contain motion of the bone and it will
probably.not be aligned with the FE mesh/CT/MRI scan system. If you
chose this an option, the AnyFE Converter can remove the rigid body
motion by using the <code class="docutils literal notranslate"><span class="pre">–r</span></code> option equal to ‘segment’:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>AnyFE2Abq.exe -i ..\files_in\clavload.xml -o ..\files_out\output.inp -m .\clavicula.inp –r segment
</pre></div>
</div>
<p>This makes all AnyFE data from the AnyFE Converter being transformed to
the local frame of the segment, here the clavicle segment, before
applied to the FE model and outputted.</p>
<p>If the reference frame of the segment is not identical to the one of the
FE mesh, one can apply a constant transformation to all data
accommodating for this misalignment. The <code class="docutils literal notranslate"><span class="pre">–t</span></code> option allows you to
enter the transformation as a string containing space separated numbers.
The command line will look like:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>AnyFE2Abq.exe -i ..\files_in\clavload.xml -o ..\files_out\output.inp -m .\clavicula.inp –r segment –t &quot;a11 a12 a13 a21 a22 a23 a31 a32 a33 dx dy dz&quot;
</pre></div>
</div>
<p>The transformation may contain either 9 or 12 numbers. The first nine,
aij, must be the orthogonal rotational transformation matrix and the
latter optional three, dx, dy, and dz, are the translations.</p>
<p>These options allow you to handle the coordinate systems differences
using the AnyFE Converter, i.e., outside AnyBody. For instance this
implies that you do not have to redo simulations just to apply the same
forces to another FE mesh with another local frame; this can all be done
with adjustment of the parameters for the AnyFE converter.</p>
<p>Now we have looked at how to execute the AnyFE converter properly, so
let us have a look at what it does.</p>
<p>Please notice that the AnyFE Converter is reading Abaqus input file
(INP) and it is only expecting a simple mesh specification. This reader
is not fully compatible with the INP keyword language for Abaqus.
Basically, it only reads in the first block of nodes (<code class="docutils literal notranslate"><span class="pre">*NODE</span></code> section)
and it does not accept commands that may interfere with the
interpretation of this node section. This implies that many Abaqus
keywords are not allowed in front of the first node section. This also
implies that subsequent node sections are not read and therefore, not
used for application of forces.</p>
<p>The AnyFE Converter performs the following actions:</p>
<ul class="simple">
<li><p>Maps all AnyBody exported forces, i.e., joint reactions, muscle
forces and applied forces to the provided FE mesh. Mass related
forces are neglected, i.e., gravitational and acceleration equivalent
forces.</p>
<ul>
<li><p>Defines nodes in the positions from the AnyFE output file, i.e.
the position of all loads (this includes muscle/ligament
attachment nodes)</p></li>
<li><p>Defines amplitudes for each force/moment component in the AnyFE
output file</p></li>
<li><p>Defines concentrated loads (<code class="docutils literal notranslate"><span class="pre">*CLOAD</span></code>) in each of these nodes</p></li>
<li><p>Defines coupling constraints between the created nodes and a part
of the surface of the bone</p></li>
</ul>
</li>
<li><p>The mesh in included</p></li>
<li><p>Adds inertia relief loads (<code class="docutils literal notranslate"><span class="pre">*INERTIA</span> <span class="pre">RELIEF</span></code>)</p></li>
</ul>
<p>Please note that the inertia relief loads will automatically be added to
the model in order to provide a full set of boundary conditions.
However, these loads require a density value in the material definition
section. Absence of this density value will result in the error during
the FE analysis. In case when additional constraints are present in the
model, e.g. environment support, contact with another bone, etc., the
inertia loads can be suppressed or removed.</p>
<p>Now we are ready to run the analysis and convert the data. Reload the
model in the AMS. Select RunApplication in the Operations tree. This
will automatically run the Calibration and InverseDynamics studies. Next
select ConvertToAbq operation and run it. This will create a new Abaqus
input file in the <code class="docutils literal notranslate"><span class="pre">files_out</span></code> folder.</p>
<p>Open Abaqus and import the input file from the output directory. This
will load the clavicle mesh model, apply the boundary conditions. Next
step is to make your custom final adjustments, run the FE solver, and
when finished, post-process the results. The image below shows the
results of running the model without any custom adjustments, however in
the following we shall consider modification of the load application
regions.</p>
<p><img alt="Clavicula stresses" src="../_images/image311.png" /></p>
<p>On the following picture, you can see the muscle attachments nodes and
coupling constraints that are applied to the finite element model.</p>
<p><img alt="Clavicula force application points" src="../_images/image49.png" /></p>
<p>Bear in mind that the muscle attachment area is considered to have a
constant radius, however, in many cases these areas are elongated and
have irregular pattern. Let us assume that the area for the
sternocleidomastoid muscle has to be changed to fit better the user’s
expectations, for example, to be more physiological. That can be done by
defining the desired muscle attachment area as a new surface in the FE
model and changing the relevant coupling constraint to refer to this
surface. In our example, we create a surface on the posteriormedial side
of the clavicle as it shown on the following pictures. Please note that
you will also need to set the influence radius option to ´To outermost
point of the region´ in order to make sure that you now make the
coupling to the whole surface.</p>
<p><img alt="Clavicula contraint region" src="../_images/image57.png" /> <img alt="Edit constraint dialog" src="../_images/image63.png" /></p>
<p>The following picture shows how the modified constraint looks like; the
sternocleidomastoid muscle attachment patch is now spread on the surface
elements of the clavicle mesh.</p>
<p><img alt="Clavicula closeup constraint region" src="../_images/image72.png" /></p>
<p>We can run the solver again and inspect the results, see the image
below. In the crude model, we have worked with in this case, we do not
see significant changes due to the modification in the overall picture.</p>
</section>


            </article>
            

            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="lesson2.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Lesson 2: ANSYS Interface</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="../AnyExp4SOLIDWORKS/index.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Making Models using SOLIDWORKS</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          

    <!-- Table of contents -->


<div class="bd-sidebar-secondary bd-toc show noprint">
</div>



        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            <p>
  
    By AnyBody Technology<br/>
  
      &copy; Copyright 2022, AnyBody Technology.<br/>
</p>
          </div>
        </footer>
        

      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b"></script>

  </body>
</html>
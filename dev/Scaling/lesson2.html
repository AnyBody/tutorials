


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Lesson 2: Scaling based on External Body Measurements &#8212; AnyBody Tutorials v7.0.1.dev Documentation</title>
    <link rel="stylesheet" href="../_static/cloud.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text|Open+Sans|Droid+Sans+Mono" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '7.0.1.dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="../_static/cloud.base.js"></script>
    <script type="text/javascript" src="../_static/cloud.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lesson 3: Scaling individual segments based on subject-specific data from medical images" href="lesson3.html" />
    <link rel="prev" title="Lesson 1: Joint to Joint Scaling Methods" href="lesson1.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../contents.html" title="Table Of Contents"
             accesskey="C">toc</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="lesson3.html" title="Lesson 3: Scaling individual segments based on subject-specific data from medical images"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="lesson1.html" title="Lesson 1: Joint to Joint Scaling Methods"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">AnyBody Tutorials v7.0.1.dev Documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Scaling</a> &#187;</li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="lesson-2-scaling-based-on-external-body-measurements">
<h1>Lesson 2: Scaling based on External Body Measurements<a class="headerlink" href="#lesson-2-scaling-based-on-external-body-measurements" title="Permalink to this headline">¶</a></h1>
<p>This tutorial presumes that you have completed <a class="reference internal" href="lesson1.html"><span class="doc">Scaling tutorial
Lesson 1: Joint to joint scaling methods</span></a>. It
covered the methods ScalingStandard, ScalingUniform, ScalingLengthMass
and ScalingLengthMassFat.</p>
<p>This lesson introduces more scaling methods, more precisely:</p>
<ul class="simple">
<li>ScalingUniformExt (scale equally in all directions; input is external
measurements)</li>
<li>ScalingLengthMassExt (scale taking mass into account; input is
external measurements)</li>
<li>ScalingLengthMassFatExt (scale taking mass and fat into account;
input is external measurements).</li>
</ul>
<div class="section" id="scaling-external">
<h2>Scaling External<a class="headerlink" href="#scaling-external" title="Permalink to this headline">¶</a></h2>
<p>The scaling laws we discussed in Lesson 1 are using measures for the
segment lengths based on joint-to-joint distances, but some joint
locations cannot be easily palpated. The hip joints are a good example.
They are located deep under the skin and are not easy to measure from
the outside. So to facilitate scaling to individuals, another set of
scaling methods are provided that use only distances between external
bony landmarks. The same three scaling strategies (uniform, length mass
and length mass fat) are available based on bony landmarks. They are
selected like this:</p>
<div class="highlight-AnyScriptDoc"><div class="highlight"><pre><span></span><span class="c1">// Scaling laws using joint to joint measures</span>
<span class="c1">//  #define BM_SCALING CONST_SCALING_UNIFORM</span>
<span class="c1">//  #define BM_SCALING CONST_SCALING_LENGTHMASS§</span>
<span class="c1">//  #define BM_SCALING CONST_SCALING_LENGTHMASSFAT§</span>


<span class="c1">// Scaling laws using external measures</span>
<span class="c1">//  #define BM_SCALING CONST_SCALING_UNIFORM_EXTMEASUREMENTS</span>
<span class="c1">//  #define BM_SCALING CONST_SCALING_LENGTHMASS_EXTMEASUREMENTS §</span>
  <span class="cp">#define</span> <span class="x x-Statements">BM_SCALING</span> <span class="x x-Options">CONST_SCALING_LENGTHMASSFAT_EXTMEASUREMENTS</span> <span class="gr"></span>

<span class="gr">// Anthropometric data file (unchanged files can be found in AAUHuman\Scaling\AnyFamily)</span>
<span class="c1">//  #path BM_SCALING_ANTHRO_FILE &quot;Model\AnyFamily\AnyMan.any&quot;§</span>
<span class="c1">//  #path BM_SCALING_ANTHRO_FILE &quot;Model\AnyFamily\AnyManUniform.any&quot;</span>
<span class="gr">  #path BM_SCALING_ANTHRO_FILE &quot;Model\AnyFamily\AnyManExternal.any&quot;</span>
<span class="c1">//  #path BM_SCALING_ANTHRO_FILE &quot;Model\AnyFamily\AnyManExtPercentile.any&quot;</span>
<span class="c1">//  #path BM_SCALING_ANTHRO_FILE &quot;Model\AnyFamily\AnyWomanExtPercentile.any&quot;</span>
</pre></div>
</div>
<p>ScalingUniformExt, ScalingLengthMassExt and ScalingLengthMassFatExt
are the scaling laws that use external measurements. They have exactly
the same scaling properties as their corresponding joint-to-joint
counterparts, and are controlled by the file AnyManExternal.any. This
last file works exactly like the AnyMan.any file, taking as input the
body mass, body height and individual segments lengths.</p>
<p>The external measures have to be taken at specific locations and in a
specific posture as shown in the figure below. The application you
have downloaded already places the body in an appropriate posture.
There is also an include file that displays the location of the
different measures called DrawExternalMeasures.any. If included as
shown below, it will display the exact dimensions on the model:</p>
<div class="highlight-AnyScriptDoc"><div class="highlight"><pre><span></span><span class="kt">AnyFolder</span> <span class="n">Model</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1">// A link to the human model</span>
  <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">HumanModel</span><span class="o">=</span><span class="p">.</span><span class="n">HumanModel</span><span class="p">.</span><span class="n">BodyModelWithDefaultDrivers</span><span class="p">;</span>

  <span class="c1">// Environment files are used to include objects surrounding human, e.g. global reference frame</span>
  <span class="cp">#include</span> <span class="s">&quot;Model\Environment.any&quot;</span>

  <span class="c1">// All added constraints reaction forces to simulate standing human</span>
  <span class="cp">#include</span> <span class="s">&quot;Model\Drivers.any&quot;</span>

  <span class="c1">// Visualization of the external measures</span>
  <span class="gr">#include &quot;Model\DrawExternalMeasures.any&quot;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>We should also remove the drawing of the forces on the hands to make the
view plainer. You can do this by commenting out the code in the
Environment.any file:</p>
<p><a class="reference internal" href="../_images/image112.jpeg"><img alt="ScalingExternalMeasure" src="../_images/image112.jpeg" style="width: 4.16667in; height: 4.93750in;" /></a></p>
<div class="highlight-AnyScriptDoc"><div class="highlight"><pre><span></span>
<span class="gr">//  AnyDrawVector DrawRightLoad = {</span>
<span class="gr">//    Vec = .RightHandLoad.F*0.015;</span>
<span class="gr">//    PointAway = On;</span>
<span class="gr">//    GlobalCoord = On;</span>
<span class="gr">//    Line = {</span>
<span class="gr">//      Style = Line3DStyleFull;</span>
<span class="gr">//      Thickness = 0.01;</span>
<span class="gr">//      RGB = {0, 0, 0};</span>
<span class="gr">//      End = {</span>
<span class="gr">//        Style = Line3DCapStyleArrow;</span>
<span class="gr">//        RGB = {0, 0, 0};</span>
<span class="gr">//        Thickness = 0.025;</span>
<span class="gr">//        Length = 0.025;</span>
<span class="gr">//      };</span>
<span class="gr">//    };</span>
<span class="gr">//    AnyRefFrame &amp;Hand = .RightHandLoad.Hand;</span>
<span class="gr">//  };</span>
<span class="gr">//</span>
<span class="gr">//  AnyDrawVector DrawLeftLoad = {</span>
<span class="gr">//    Vec = .LeftHandLoad.F*0.015;</span>
<span class="gr">//    PointAway = On;</span>
<span class="gr">//    GlobalCoord = On;</span>
<span class="gr">//    Line = {</span>
<span class="gr">//      Style = Line3DStyleFull;</span>
<span class="gr">//      Thickness = 0.01;</span>
<span class="gr">//      RGB = {0, 0, 0};</span>
<span class="gr">//      End = {</span>
<span class="gr">//        Style = Line3DCapStyleArrow;</span>
<span class="gr">//        RGB = {0, 0, 0};</span>
<span class="gr">//        Thickness = 0.025;</span>
<span class="gr">//        Length = 0.025;</span>
<span class="gr">//      };</span>
<span class="gr">//    };</span>
<span class="gr">//    AnyRefFrame &amp;Hand = .LeftHandLoad.Hand;</span>
<span class="gr">//  };</span>
</pre></div>
</div>
<p>After loading the model you will see that the red spheres on the image
below show the bony landmarks used for scaling of segment lengths in
these methods and the blue lines connecting them show the actual
dimensions.</p>
</div>
<div class="section" id="percentile-scaling">
<h2>Percentile scaling<a class="headerlink" href="#percentile-scaling" title="Permalink to this headline">¶</a></h2>
<p>While the methods described in the previous section are useful for
scaling a model to a particular individual, many applications,
especially within ergonomic product design, require the model to fit
an archetypical body size such as they are defined in anthropometrical
population statistics. So this section describes scaling of models to
a certain percentile of the population. The anthropometric data of the
population are presumed to follow a Gaussian distribution and with
enough measured data it is possible to calculate the average or mean
value, standard deviation and percentile values. The mean value also
corresponds to the 50th percentile, meaning that 50% of the population
is larger and 50% is smaller than that exact value. Anthropometric
data can be found in many sources, but the files used in this section
are based on this reference: ADULTDATA, The Handbook of Adult
Anthropometric Measurements. Data for Design Safety. Dept. of Trade &amp;
Industry, United Kingdom.</p>
<p>This scaling strategy for percentiles also uses external measures, so
you have to include one of the three external scaling laws. We shall
use ScalingLengthMassFatExt, but as you may have guessed we need a
specific AnyMan file to control the percentile scaling. This one is
called AnyManExtPercentile.any. It has been designed to represent the
European male population, but if you have data available for other
populations it is easy to fill them in. This is how it is done (you
can also comment out the DrawExternalMeasure if you do not want it):</p>
<div class="highlight-AnyScriptDoc"><div class="highlight"><pre><span></span><span class="c1">// Anthropometric data file (unchanged files can be found in AAUHuman\Scaling\AnyFamily)</span>
<span class="c1">//  #path BM_SCALING_ANTHRO_FILE &quot;Model\AnyFamily\AnyMan.any&quot;</span>
<span class="c1">//  #path BM_SCALING_ANTHRO_FILE &quot;Model\AnyFamily\AnyManUniform.any&quot;</span>
<span class="gr">//  #path BM_SCALING_ANTHRO_FILE &quot;Model\AnyFamily\AnyManExternal.any&quot;</span>
<span class="gr">  #path BM_SCALING_ANTHRO_FILE &quot;Model\AnyFamily\AnyManExtPercentile.any&quot;</span>
<span class="c1">//  #path BM_SCALING_ANTHRO_FILE &quot;Model\AnyFamily\AnyWomanExtPercentile.any&quot;</span>
</pre></div>
</div>
<p>Open the AnyManExtPercentile file. The percentile function controls
all the anthropometric data we saw previously: the body mass, body
height and all segment lengths. All you have to do is to specify the
Percentile variable, and due to the non linearity of the function, you
also have to select the linear regression corresponding to the range
of value of the percentile.</p>
<p>Let us try some examples now. In the AnyManExtPercentile file enter an
80th percentile as input:</p>
<div class="highlight-AnyScriptDoc"><div class="highlight"><pre><span></span><span class="c1">// PercentileAnyVar</span>
<span class="n">Percentile</span> <span class="o">=</span> <span class="gr">80</span><span class="p">;</span> <span class="c1">//Percent of the population represented. Choose one of the Z linear regressions below.</span>
</pre></div>
</div>
<p>You have to take care that the linear regression for Z is
valid for an 80th percentile:</p>
<div class="highlight-AnyScriptDoc"><div class="highlight"><pre><span></span><span class="c1">// Choose only one of the following linear regressions depending on the percentile.</span>
<span class="c1">//AnyVar Z = (0.064*Percentile)-1.96; // This is an approximation valid for Percentile from 5% to 15%.</span>
<span class="kt">AnyVar</span> <span class="n">Z</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0279</span><span class="o">*</span><span class="n">Percentile</span><span class="p">)</span><span class="o">-</span><span class="mf">1.3971</span><span class="p">;</span> <span class="c1">// This is an approximation valid for Percentile from 16% to 84%.</span>
<span class="c1">//AnyVar Z = (0.064*Percentile)-4.44; // This is an approximation valid for Percentile from 85% to 95%.</span>
</pre></div>
</div>
<p>The regression model included now is valid for Percentile from 16% to
84%. We go for 80%, so the regression is valid. You can load the model
and investigate the proportions in the model view window. 80% of the
European males are smaller than the model you have now, and 20% are
taller. Let us try to model a 95th percentile male. This time we also
have to change the linear regression function:</p>
<div class="highlight-AnyScriptDoc"><div class="highlight"><pre><span></span><span class="c1">// Percentile</span>
<span class="kt">AnyVar</span> <span class="n">Percentile</span> <span class="o">=</span> <span class="gr">95</span><span class="p">;</span> <span class="c1">//Percent of the population represented. Choose one of the Z linear regression below.</span>

<span class="c1">// Choose only one of the following linear regression depending on the percentile.</span>
<span class="c1">//AnyVar Z = (0.064*Percentile)-1.96; // This is valid for Percentile from 5% to 15%.§</span>
<span class="c1">//AnyVar Z = (0.0279*Percentile)-1.3971; // This is valid for Percentile from 16% to 84%.</span>
<span class="kt">AnyVar</span> <span class="n">Z</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.064</span><span class="o">*</span><span class="n">Percentile</span><span class="p">)</span><span class="o">-</span><span class="mf">4.44</span><span class="p">;</span> <span class="c1">// This is valid for Percentile from 85% to 95%.§&lt;/</span>
</pre></div>
</div>
<p>An example of application for such scaling can be a door height: we
know that if the door is high enough for this model then it will be
enough for 95% of the population.</p>
<p>As the file AnyManExtPercentile represent European males, there is a
file AnyWomanExtPercentile representing European females. The
percentile is specified in exactly the same way.
<a class="reference internal" href="lesson3.html"><span class="doc">Lesson3</span></a> shows how patient-specific scaling based on
geometry data of bones can be used.</p>
<p>We are extremely grateful to Ford Forschungszentrum Aachen, Germany, for
sponsoring the scaling implementation.</p>
<div class="without-title admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><strong>Next lesson:</strong> <a class="reference internal" href="#"><span class="doc">Lesson 2: Scaling based on External Body Measurements</span></a>.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="../index.html" title="index">
          <img class="logo" src="../_static/anybody_tutorials_logo.png" alt="Logo"/>
        </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<div class="sphinx-toc sphinxglobaltoc">
<h3><a href="../contents.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Tutorial overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../A_Getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../A_Getting_started_anyscript/index.html">Getting started: AnyScript Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../A_Getting_started_modeling/index.html">Getting Started with Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Interface_features/index.html">User interface features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../A_study_of_studies/index.html">A Study of Studies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Making_things_move/index.html">Making things move</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MuscleRecruitment/index.html">Inverse Dynamics of Muscle Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ForceDependentKinematics/index.html">Force-Dependent Kinematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Muscle_modeling/index.html">Muscle Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../The_mechanical_elements/index.html">The Mechanical Elements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Advanced_script_features/index.html">Advanced Script Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Finite_element_analysis/index.html">Finite Element Analysis Interfacing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AnyExp4SOLIDWORKS/index.html">Making Models using SOLIDWORKS</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Scaling</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="lesson1.html">Lesson 1: Joint to Joint Scaling Methods</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Lesson 2: Scaling based on External Body Measurements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scaling-external">Scaling External</a></li>
<li class="toctree-l3"><a class="reference internal" href="#percentile-scaling">Percentile scaling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lesson3.html">Lesson 3: Scaling individual segments based on subject-specific data from medical images</a></li>
<li class="toctree-l2"><a class="reference internal" href="lesson4.html">Lesson 4: Including a Custom Scaling Law</a></li>
</ul>
</li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/Scaling/lesson2.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../contents.html" title="Table Of Contents"
             >toc</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="lesson3.html" title="Lesson 3: Scaling individual segments based on subject-specific data from medical images"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="lesson1.html" title="Lesson 1: Joint to Joint Scaling Methods"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">AnyBody Tutorials v7.0.1.dev Documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="index.html" >Scaling</a> &#187;</li> 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, AnyBody Technology.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.4.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>
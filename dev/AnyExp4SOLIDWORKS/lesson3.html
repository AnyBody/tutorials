

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<meta content="noindex" name="robots" />
<meta property="og:title" content="Creating human-machine integrated analysis model" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://anyscript.org/AnyExp4SOLIDWORKS/lesson3.html" />
<meta property="og:site_name" content="AnyScript Tutorials" />
<meta property="og:description" content="If you did not finish the previous lesson, please download the FitnessMachine\_Mate\_Config3.zip file in order to get the correct set of files for starting this lesson. In this lesson, we will crea..." />
<meta property="og:image" content="https://anyscript.org/_images/lesson3_image1.png" />
<meta property="og:image:alt" content="Human template dialog" />
<meta name="description" content="If you did not finish the previous lesson, please download the FitnessMachine\_Mate\_Config3.zip file in order to get the correct set of files for starting this lesson. In this lesson, we will crea..." />

    <title>Creating human-machine integrated analysis model &#8212; AnyBody Tutorials v7.4.3-dev</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'AnyExp4SOLIDWORKS/lesson3';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Scaling and Personalizing your model" href="../Scaling/index.html" />
    <link rel="prev" title="Making the translated AnyScript model move" href="lesson2.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder=""
         aria-label=""
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/AnyBodyTutorials2.svg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/AnyBodyTutorials2.svg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder=""
         aria-label=""
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../GettingStarted.html"><strong>Getting Started</strong></a><input checked class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../A_Getting_started/index.html">Getting Started - First steps</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started/intro.html">Getting Started Tutorial</a></li>


<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started/lesson1.html">Lesson 1: Creating a Standing Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started/lesson2.html">Lesson 2: Controlling the Posture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started/lesson3.html">Lesson 3: Reviewing Analysis Results</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../A_Getting_started_anyscript/index.html">How to write AnyScript</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_anyscript/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_anyscript/lesson1.html">Lesson 1: Basic Concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_anyscript/lesson2.html">Lesson 2: Defining Segments and Displaying Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_anyscript/lesson3.html">Lesson 3: Connecting Segments by Joints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_anyscript/lesson4.html">Lesson 4: Imparting movement with Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_anyscript/lesson5.html">Lesson 5: Definition of Muscles and External Forces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_anyscript/lesson6.html">Lesson 6: Adding Real Bone Geometries</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../A_Getting_started_modeling/index.html">Modelling the Human body</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_modeling/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_modeling/lesson1.html">Lesson 1: Starting with a New Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_modeling/lesson2.html">Lesson 2: Adjusting the Human Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_modeling/lesson3.html">Lesson 3: Making Ends Meet</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_Getting_started_modeling/lesson4.html">Lesson 4: Kinetics - Computing Forces</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../A_Getting_started_AMMR/index.html">The AnyBody Model Repository</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference external" href="https://anyscript.org/ammr-doc/creating_model_from_scratch.html">Creating a Human Model from scratch</a></li>
<li class="toctree-l3"><a class="reference external" href="https://anyscript.org/ammr-doc/Scaling/lesson1.html">Scaling: Joint to joint scaling</a></li>
<li class="toctree-l3"><a class="reference external" href="https://anyscript.org/ammr-doc/Scaling/lesson2.html">Scaling: External Body Measurements</a></li>
<li class="toctree-l3"><a class="reference external" href="https://anyscript.org/ammr-doc/Scaling/lesson3.html">Scaling: Segmental scaling factors</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../Tutorials.html"><strong>Tutorials</strong></a><input checked class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../A_study_of_studies/index.html">A Study of Studies</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../A_study_of_studies/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_study_of_studies/lesson1.html">Lesson1: Mechanical System Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_study_of_studies/lesson2.html">Lesson2: Initial Conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_study_of_studies/lesson3.html">Lesson 3: Kinematic Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../A_study_of_studies/lesson4.html">Lesson 4: Inverse Dynamics</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Making_things_move/index.html">Making things move</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Making_things_move/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Making_things_move/lesson1.html">Lesson1: Simple drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Making_things_move/lesson2.html">Lesson 2: Using motion capture data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Making_things_move/lesson3.html">Lesson3: Noise and filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Making_things_move/lesson4.html">Lesson 4: Parameter identification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Making_things_move/lesson5.html">Lesson 5: Using real data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Making_things_move/lesson6.html">Lesson 6: Troubleshooting C3D files</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../MuscleRecruitment/index.html">Inverse Dynamics of Muscle Systems</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/Inverse_dynamics.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/lesson1.html">Lesson 1: The Basics of Muscle Recruitment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/lesson2.html">Lesson 2: Linear Muscle Recruitment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/lesson3.html">Lesson 3: Quadratic Muscle Recruitment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/lesson4.html">Lesson 4: Polynomial Muscle Recruitment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/lesson5.html">Lesson 5: Min/Max Muscle Recruitment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/lesson6.html">Lesson 6: Composite Recruitment Criteria</a></li>
<li class="toctree-l3"><a class="reference internal" href="../MuscleRecruitment/lesson_calibration.html">Lesson 7: Calibration</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Muscle_modeling/index.html">Muscle Modeling</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Muscle_modeling/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Muscle_modeling/lesson1.html">Lesson 1: The Basics of Muscle Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Muscle_modeling/lesson2.html">Lesson 2: Controlling Muscle Drawing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Muscle_modeling/lesson3.html">Lesson 3: Via-point Muscles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Muscle_modeling/lesson4.html">Lesson 4: Wrapping Muscles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Muscle_modeling/lesson5.html">Lesson 5: Muscle Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Muscle_modeling/lesson6.html">Lesson 6: General Muscles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Muscle_modeling/lesson7.html">Lesson 7: Ligaments</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../The_mechanical_elements/index.html">The Mechanical Elements</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../The_mechanical_elements/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The_mechanical_elements/lesson1.html">Lesson 1: Segments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The_mechanical_elements/lesson2.html">Lesson 2: Joints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The_mechanical_elements/lesson3.html">Lesson 3: Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The_mechanical_elements/lesson4.html">Lesson 4: Kinematic Measures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../The_mechanical_elements/lesson5.html">Lesson 5: Forces</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../ForceDependentKinematics/index.html">Force-Dependent Kinematics</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../ForceDependentKinematics/fdk.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ForceDependentKinematics/lesson1.html">Lesson 1: The Baseline Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ForceDependentKinematics/lesson2.html">Lesson 2: Adding FDK Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ForceDependentKinematics/lesson3.html">Lesson 3: Results of FDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ForceDependentKinematics/lesson4.html">Lesson 4: Using Surfaces to Define the Knee Joint</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ForceDependentKinematics/lesson5.html">Lesson 5: Using Contact Forces to Replace a Joint in a Human Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ForceDependentKinematics/fdkappendix.html">FDK appendix</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Parameter_studies_and_optimization/index.html">Parameter Studies and Optimization</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Parameter_studies_and_optimization/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Parameter_studies_and_optimization/lesson1.html">Defining a Parameter Study</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Parameter_studies_and_optimization/lesson2.html">Optimization Studies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Parameter_studies_and_optimization/lesson3.html">Optimization Studies in Python</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Finite_element_analysis/index.html">Finite Element Analysis Interfacing</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Finite_element_analysis/lesson1.html">Lesson 1: Export of data for FEA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Finite_element_analysis/lesson2.html">Lesson 2: ANSYS Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Finite_element_analysis/lesson3.html">Lesson 3: Abaqus Interface</a></li>
</ul>
</li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="index.html">Making Models using SOLIDWORKS</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="lesson1.html">Translating a SOLIDWORKS CAD model to AnyBody</a></li>
<li class="toctree-l3"><a class="reference internal" href="lesson2.html">Making the translated AnyScript model move</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Creating human-machine integrated analysis model</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Scaling/index.html">Scaling and Personalizing your model</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../Scaling/lesson3.html">Lesson 1: Scaling based on medical images</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-17"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../Scaling/lesson3_appendix.html"> Lesson 1 appendix</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Scaling/lesson4.html">Lesson 2: Including a custom scaling function into your model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Posture_and_movement/intro.html">Posture and Movement Prediction</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Interface_features/index.html">User interface features</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-18"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/lesson1.html">Lesson 1: The Editor Window</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/lesson2.html">Lesson 2: The Model View Window</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/lesson3.html">Lesson 3: The Chart View</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/lesson4.html">Lesson 4: The Model Tree and Object Description</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/lesson5.html">Lesson 5: The Command Line Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/lesson6.html">Lesson 6: Modifying the Loaded Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Interface_features/lesson7.html">Lesson 7: Wrapping the Model with AnyBody Project</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Advanced_script_features/index.html">Advanced Script Features</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-19"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Advanced_script_features/lesson1.html">Lesson 1: Using References</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Advanced_script_features/lesson2.html">Lesson 2: Using Include Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Advanced_script_features/lesson3.html">Lesson 3: Mathematical Expressions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Troubleshooting_anyscript/intro.html">Trouble Shooting AnyScript Models</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../Validation_of_models/index.html">Validation of Models</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-20"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../Validation_of_models/intro.html">Introduction to validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Validation_of_models/Kinematic_input.html">Validating Kinematic input</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../about.html"><strong>About</strong></a><input checked class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-21"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html">Help improve tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../legal.html">Legal, Trademarks and Copyrights</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/anybody/anybody-tutorial/edit/main/AnyExp4SOLIDWORKS/lesson3.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/anybody/anybody-tutorial/issues/new?title=Issue%20on%20page%20%2FAnyExp4SOLIDWORKS/lesson3.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Creating human-machine integrated analysis model</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-human-model-from-a-main-file-template">Create a human model from a main file template</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#insert-the-fitness-machine-into-the-model">Insert the fitness machine into the model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connecting-human-model-and-fitness-machine">Connecting human model and fitness machine</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="creating-human-machine-integrated-analysis-model">
<h1>Creating human-machine integrated analysis model<a class="headerlink" href="#creating-human-machine-integrated-analysis-model" title="Permalink to this heading">#</a></h1>
<p>If you did not finish the previous lesson, please download the
<a class="reference download internal" download="" href="../_downloads/e9c4a7c1954a10f91d546f8fbf6a3c49/FitnessMachine_Mate_Config3.zip"><code class="xref download docutils literal notranslate"><span class="pre">FitnessMachine\_Mate\_Config3.zip</span></code></a> file in order to get the correct set of files for starting this lesson.</p>
<p>In this lesson, we will create a model with a human body using a
template; we will add the fitness machine created in the previous lesson
and then connect the human body to the fitness machine.</p>
<section id="create-a-human-model-from-a-main-file-template">
<h2>Create a human model from a main file template<a class="headerlink" href="#create-a-human-model-from-a-main-file-template" title="Permalink to this heading">#</a></h2>
<p>First, let us start a new human model from a template which we will call
‘FitnessMachine_With_Human’ using the main file template menu from the
AnyBody GUI.</p>
<p><img alt="Human template dialog" src="../_images/lesson3_image1.png" /></p>
<p>After we create the model, we should make sure that the definitions in
the libdef.any files are set to use the right body model as explained in
the tutorial ‘Getting Started with AMMR’. When we load this model, we
can see that we have a standing full human body model.</p>
<p><img alt="Model view Full body" src="../_images/lesson3_image2.png" /></p>
<p>To keep things simple, start by switching off the muscles by setting the
BM statement for the muscle definitions of arms, legs and trunk in our
new created file ‘FitnessMachine_With_Human.main.any’ to
<code class="docutils literal notranslate"><span class="pre">_MUSCLES_NONE_</span></code>:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="s">&quot;../libdef.any&quot;</span>

<span class="n">Main</span> <span class="o">=</span> 
<span class="p">{</span>  

  <span class="c1">// Body Model configuration:</span>
  <span class="cp">#include</span> <span class="s">&quot;Model/BodyModelConfiguration.any&quot;</span>

  <span class="c1">// Using your own Mannequin.any file in the Model folder of your model</span>
  <span class="cp">#include</span> <span class="s">&quot;Model\Mannequin.any&quot;</span>

  <span class="c1">// Switch off all muscles of the body model</span>
  <span class="gr">#define BM_LEG_MUSCLES_BOTH _MUSCLES_NONE_</span>
<span class="gr">  #define BM_TRUNK_MUSCLES _MUSCLES_NONE_</span>
<span class="gr">  #define BM_ARM_MUSCLES_BOTH _MUSCLES_NONE_</span>

  <span class="c1">// Include default human model</span>
  <span class="cp">#include</span> <span class="s">&quot;&lt;ANYBODY_PATH_BODY&gt;\HumanModel.any&quot;</span>
  <span class="p">...</span>
</pre></div>
</div>
<p>Next, we will equip the model with a center of mass (CoM) of the human model.
For this we must add an extra virtual segment that follows the CoM. We will make
the virtual segment massless, since it is not a real segment. We use the CoM
measure (AnyKinCoM) to drive this dummy segment. The code for doing this is
prepared in <a class="reference download internal" download="" href="../_downloads/71d8c99683028400655c04aa18db5ade/CoM_View.any"><code class="xref download docutils literal notranslate"><span class="pre">CoM\_View.any</span></code></a>. This kind of CoM
segment can be used not only for visualization, but also for kinematic
constraints of the human model.</p>
<p>Furthermore, we will extend the human model with reference frames
attached to the human segments for interfacing with the machine. This
will of course be done at the hands and feet, but also at the pelvis,
which we may want to control. We add nodes (AnyRefNode) at the palms of
the hands, the toes of the feet and at the center of the pelvis. Please
see <a class="reference download internal" download="" href="../_downloads/3edd04fa012a01437f7cb840795b66e3/HumanRefNodes.any"><code class="xref download docutils literal notranslate"><span class="pre">HumanRefNodes.any</span></code></a>.</p>
<p>Please save these files in the Model subfolder and let us edit the main file
in order to include these additional AnyScript files like this:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span> <span class="kt">AnyFolder</span> <span class="n">Model</span> <span class="o">=</span> 
  <span class="p">{</span>
    <span class="c1">// A link to the human model</span>
    <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">BodyModel</span> <span class="o">=</span> <span class="p">.</span><span class="n">HumanModel</span><span class="p">.</span><span class="n">BodyModel</span><span class="p">;</span>
    <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">DefaultMannequinDrivers</span> <span class="o">=</span> <span class="p">.</span><span class="n">HumanModel</span><span class="p">.</span><span class="n">DefaultMannequinDrivers</span><span class="p">;</span>

    <span class="c1">// Definition for CoM(Center of Mass) of Human Model</span>
    <span class="gr">#include &quot;Model\CoM_View.any&quot;</span>

    <span class="c1">// Definition of additional AnyRefNode object in the human model</span>
    <span class="gr">#include &quot;Model\HumanRefNodes.any&quot;</span>
  <span class="p">...</span>
  <span class="p">};</span>
</pre></div>
</div>
<p>If you reload the model, then you will see the dummy CoM segment and
some AnyRefNode objects like this:</p>
<p><img alt="Model view Rear Fullbody without muscles" src="../_images/lesson3_image3.png" /></p>
</section>
<section id="insert-the-fitness-machine-into-the-model">
<h2>Insert the fitness machine into the model<a class="headerlink" href="#insert-the-fitness-machine-into-the-model" title="Permalink to this heading">#</a></h2>
<p>We are now ready to include the fitness machine. The first step is to
copy the fitness machine we created in the previous lesson to the Input
subfolder of our model. Next, we will add the fitness machine to the
model by including the ‘FitnessMachine.any’ file again. You should put
all the files (including FitnessMachine.any file) from the previous
lesson into the Input subfolder of your model which is created by the
template. In addition, we will modify the predefined AnyBodyStudy object
like we did in Lesson 2 to prepare for an actual dynamic analysis.</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span>  <span class="kt">AnyFolder</span> <span class="n">Model</span> <span class="o">=</span> 
  <span class="p">{</span>
    <span class="c1">// A link to the human model</span>
    <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">BodyModel</span> <span class="o">=</span> <span class="p">.</span><span class="n">HumanModel</span><span class="p">.</span><span class="n">BodyModel</span><span class="p">;</span>
    <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">DefaultMannequinDrivers</span> <span class="o">=</span> <span class="p">.</span><span class="n">HumanModel</span><span class="p">.</span><span class="n">DefaultMannequinDrivers</span><span class="p">;</span>

    <span class="c1">// Definition for CoM(Center of Mass) of Human Model</span>
     <span class="cp">#include</span> <span class="s">&quot;Model\CoM_View.any&quot;</span>

    <span class="c1">// Definition of additional AnyRefNode object in the human model</span>
    <span class="cp">#include</span> <span class="s">&quot;Model\HumanRefNodes.any&quot;</span>

    <span class="c1">// AnyScript file for the fitness machine from SolidWorks</span>
    <span class="gr">#include &quot;Input\FitnessMachine.any&quot;</span>

    <span class="c1">// Environment files are used to include objects surrounding human</span>
    <span class="cp">#include</span> <span class="s">&quot;Model\Environment.any&quot;</span>

    <span class="kt">AnyFolder</span> <span class="n">ModelEnvironmentConnection</span> <span class="o">=</span> 
    <span class="p">{</span>
      <span class="c1">//&#39;JointsAndDrivers.any&#39; file can include all kinematic constraints such as joints and drivers</span>
      <span class="cp">#include</span> <span class="s">&quot;Model\JointsAndDrivers.any&quot;</span>
      <span class="c1">// Additional reactions which are required to run the inverse dynamics analysis</span>
      <span class="cp">#include</span> <span class="s">&quot;Model\Reactions.any&quot;</span>
    <span class="p">};</span>
  <span class="p">};</span>

  <span class="kt">AnyBodyStudy</span> <span class="n">Study</span> <span class="o">=</span>
  <span class="p">{</span>
    <span class="kt">AnyFolder</span><span class="o">&amp;</span> <span class="n">Model</span> <span class="o">=</span> <span class="p">.</span><span class="n">Model</span><span class="p">;</span>

    <span class="n">Gravity</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.81</span><span class="p">,</span> <span class="mi">0</span><span class="p">};</span>
    <span class="gr">tStart = 0;</span>
<span class="gr">    tEnd = 1; </span>
    <span class="n">nStep</span> <span class="o">=</span> <span class="gr">61;</span>
    <span class="c1">// Overdeterminate solver is needed while using the </span>
    <span class="c1">// soft default mannequin drivers.</span>
    <span class="n">Kinematics</span><span class="p">.</span><span class="n">SolverType</span> <span class="o">=</span> <span class="kp">KinSolOverDeterminate</span><span class="p">;</span>
    <span class="n">InitialConditions</span><span class="p">.</span><span class="n">SolverType</span> <span class="o">=</span> <span class="n">Kinematics</span><span class="p">.</span><span class="n">SolverType</span> <span class="p">;</span>
  <span class="p">};</span>
</pre></div>
</div>
<p>Similar to the previous lesson, we will add a driver for the fitness machine to
make the model kinematically determinate. To do this, we can use the
<a class="reference download internal" download="" href="../_downloads/d056812ddc7550882e124c1d57f2aa88/MachineOperation.any"><code class="xref download docutils literal notranslate"><span class="pre">MachineOperation.any</span></code></a> file which
defines the drivers we created in Lesson 2.</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyFolder</span> <span class="n">MachineOperation</span> <span class="o">=</span>
<span class="p">{</span>
    <span class="kt">AnyVar</span> <span class="n">T_period</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
    <span class="kt">AnyVar</span> <span class="n">angular_vel</span> <span class="o">=</span> <span class="mf">360.0</span> <span class="o">/</span> <span class="n">T_period</span><span class="p">;</span>
    <span class="kt">AnyVar</span> <span class="n">phase_offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kt">AnyKinEqSimpleDriver</span> <span class="n">Rotation_Drv</span> <span class="o">=</span>
    <span class="p">{</span>
        <span class="kt">AnyRevoluteJoint</span><span class="o">&amp;</span> <span class="n">jnt</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">Model</span><span class="p">.</span><span class="n">FitnessMachine</span><span class="p">.</span><span class="n">Mates</span><span class="p">.</span><span class="n">Hinge_MainCylinder</span><span class="p">;</span>
        <span class="n">DriverPos</span> <span class="o">=</span> <span class="p">{.</span><span class="n">phase_offset</span><span class="p">};</span>
        <span class="n">DriverVel</span> <span class="o">=</span> <span class="kp">pi</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="p">{</span><span class="o">-</span><span class="p">.</span><span class="n">angular_vel</span><span class="p">};</span>
        <span class="n">Reaction</span><span class="p">.</span><span class="n">Type</span> <span class="o">=</span> <span class="p">{</span><span class="kp">Off</span><span class="p">};</span>
    <span class="p">};</span>

    <span class="kt">AnyForce</span> <span class="n">ResistanceTorque</span> <span class="o">=</span>
    <span class="p">{</span>
        <span class="kt">AnyVar</span> <span class="n">coeff_term</span> <span class="o">=</span> <span class="mi">85</span><span class="p">;</span>
        <span class="kt">AnyVar</span> <span class="n">const_term</span> <span class="o">=</span> <span class="n">coeff_term</span><span class="p">;</span>
        <span class="kt">AnyRevoluteJoint</span><span class="o">&amp;</span> <span class="n">jnt</span> <span class="o">=</span> <span class="n">Main</span><span class="p">.</span><span class="n">Model</span><span class="p">.</span><span class="n">FitnessMachine</span><span class="p">.</span><span class="n">Mates</span><span class="p">.</span><span class="n">Hinge_MainCylinder</span><span class="p">;</span>
        <span class="n">F</span> <span class="o">=</span> <span class="p">{</span><span class="n">coeff_term</span> <span class="o">*</span> <span class="nb">sin</span><span class="p">(</span><span class="n">jnt</span><span class="p">.</span><span class="n">Pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="kp">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">const_term</span><span class="p">};</span>
    <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
<p>We will copy this file to the Model subfolder of our model and include it
into our model.</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyFolder</span> <span class="n">Model</span> <span class="o">=</span> 
  <span class="p">{</span>
    <span class="c1">// A link to the human model</span>
    <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">BodyModel</span> <span class="o">=</span> <span class="p">.</span><span class="n">HumanModel</span><span class="p">.</span><span class="n">BodyModel</span><span class="p">;</span>
    <span class="kt">AnyFolder</span> <span class="o">&amp;</span><span class="n">DefaultMannequinDrivers</span> <span class="o">=</span> <span class="p">.</span><span class="n">HumanModel</span><span class="p">.</span><span class="n">DefaultMannequinDrivers</span><span class="p">;</span>
    
    <span class="c1">// Definition for CoM(Center of Mass) of Human Model</span>
    <span class="cp">#include</span> <span class="s">&quot;Model\CoM_View.any&quot;</span>

    <span class="c1">// Definition of additional AnyRefNode object in the human model</span>
    <span class="cp">#include</span> <span class="s">&quot;Model\HumanRefNodes.any&quot;</span>
    
    <span class="c1">// AnyScript file for the fitness machine from SolidWorks</span>
    <span class="cp">#include</span> <span class="s">&quot;Input\FitnessMachine.any&quot;</span>
 
    <span class="c1">// Environment files are used to include objects surrounding human</span>
    <span class="cp">#include</span> <span class="s">&quot;Model\Environment.any&quot;</span>   
 
    <span class="kt">AnyFolder</span> <span class="n">ModelEnvironmentConnection</span> <span class="o">=</span> 
    <span class="p">{</span>
      <span class="c1">//&#39;JointsAndDrivers.any&#39; file can include all kinematic constraints such as joints and drivers</span>
      <span class="cp">#include</span> <span class="s">&quot;Model\JointsAndDrivers.any&quot;</span>
      <span class="c1">// Additional reactions which are required to run the inverse dynamics analysis</span>
      <span class="cp">#include</span> <span class="s">&quot;Model\Reactions.any&quot;</span>
      <span class="c1">// Include drivers of the fitness machine</span>
      <span class="gr">#include &quot;Model\MachineOperation.any&quot;</span>
    <span class="p">};</span>
  <span class="p">};</span>
</pre></div>
</div>
<p>Notice that the drivers have been placed in a separate folder called ‘
ModelEnvironmentConnection’. This is a typical setup used in most
models.</p>
<p>When we now load the model, we will see that our human is positioned forward of the
machine. We need to change his position so it is relative to the fitness machine.
We do this by changing the mannequin of the model. Since we do not want to
spend too much time positioning the human model in this tutorial, we
will use the file <a class="reference download internal" download="" href="../_downloads/72c7f3ca4072d2be7592a77d2433c896/Mannequin.any"><code class="xref download docutils literal notranslate"><span class="pre">Mannequin.any</span></code></a>. Copy the file to the Model subfolder
to overwrite it.</p>
<p>When we now load the model and run the Kinematics, we will see that out
human is located on the fitness machine and the machine is moving. Now,
the only thing missing is to connect our body model to the machine.</p>
</section>
<section id="connecting-human-model-and-fitness-machine">
<h2>Connecting human model and fitness machine<a class="headerlink" href="#connecting-human-model-and-fitness-machine" title="Permalink to this heading">#</a></h2>
<p>The first thing we have to do to connect our human with the machine is
to undefine the default drivers of the human model. We do this by
setting a BM statement in the Main folder:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="s">&quot;../libdef.any&quot;</span>

<span class="n">Main</span> <span class="o">=</span> 
<span class="p">{</span>  

  <span class="c1">// Body Model configuration:</span>
  <span class="cp">#include</span> <span class="s">&quot;Model/BodyModelConfiguration.any&quot;</span>

  <span class="c1">// Using your own Mannequin.any file in the Model folder of your model</span>
  <span class="cp">#include</span> <span class="s">&quot;Model\Mannequin.any&quot;</span>
  
  <span class="c1">// Switch off all muscles of the body model</span>
  <span class="cp">#define</span> <span class="x x-Statements">BM_LEG_MUSCLES_BOTH</span> <span class="x x-Options">_MUSCLES_NONE_</span>
  <span class="cp">#define</span> <span class="x x-Statements">BM_TRUNK_MUSCLES</span> <span class="x x-Options">_MUSCLES_NONE_</span>
  <span class="cp">#define</span> <span class="x x-Statements">BM_ARM_MUSCLES_BOTH</span> <span class="x x-Options">_MUSCLES_NONE_</span>
  <span class="c1">// Switch of the default drivers</span>
  <span class="gr">#define BM_MANNEQUIN_DRIVER_DEFAULT OFF</span>

  <span class="c1">// Include default human model</span>
  <span class="cp">#include</span> <span class="s">&quot;&lt;ANYBODY_PATH_BODY&gt;\HumanModel.any&quot;</span>
   <span class="p">...</span>
</pre></div>
</div>
<p>When you load this model, you will see the following warning message:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Model Warning: Study &#39;Main.Study&#39; contains too few kinematic constraints to be kinematically determinate.
</pre></div>
</div>
<p>If you look at the Object Description of your AnyBodyStudy object, you
can find the information about the number of DOFs and constraints of the
model.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Total number of rigid-body d.o.f.: 414
Total number of constraints:
Joints: 264
Drivers: 98
Other: 10
Total: 372
</pre></div>
</div>
<p>This means that we are missing 42 constraints. These were the degrees
of freedom released when we removed the default drivers.
This implies that the AnyBody human model contains 42
degrees of freedom. So we have to define 42 other constraints for the human
model.</p>
<p>The AnyExp4SOLIDWORKS translator searches for user-defined reference
entities with a certain prefix. You select the prefix in the options
dialog for the translator. We will use some of these reference systems
for interfacing. In this model you can find this information in the
‘FitnessMachine.any’ file or simply in the Model Tree of the loaded
model.</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="kt">AnyFolder</span> <span class="n">FitnessMachine</span> <span class="o">=</span>
<span class="p">{</span>
  <span class="kt">AnyKinEqType</span> <span class="n">_ANY_CTYPE_</span> <span class="o">=</span> <span class="kp">Hard</span><span class="p">;</span>

  <span class="kt">AnyFolder</span> <span class="n">_ANY_INTERFACE_</span> <span class="o">=</span>
  <span class="p">{</span>
    <span class="c1">//LIST OF USER-DEFINED REFERENCE COORDINATE SYSTEMS</span>
   <span class="gr"> AnyRefFrame&amp; Pedal___1____ANY_TOE1 = .Pedal___1.ANY_TOE1;</span>
<span class="gr">    AnyRefFrame&amp; Pedal___1____ANY_CENTER = .Pedal___1.ANY_CENTER;</span>
<span class="gr">    AnyRefFrame&amp; Pedal___1____ANY_TOE2 = .Pedal___1.ANY_TOE2;</span>
<span class="gr">    AnyRefFrame&amp; Pedal___2____ANY_TOE1 = .Pedal___2.ANY_TOE1;</span>
<span class="gr">    AnyRefFrame&amp; Pedal___2____ANY_CENTER = .Pedal___2.ANY_CENTER;</span>
<span class="gr">    AnyRefFrame&amp; Pedal___2____ANY_TOE2 = .Pedal___2.ANY_TOE2;</span>
<span class="gr">    AnyRefFrame&amp; ANY_LEFT_HAND1 = .Handle___1.ANY_LEFT_HAND1;</span>
<span class="gr">    AnyRefFrame&amp; ANY_LEFT_HAND2 = .Handle___1.ANY_LEFT_HAND2;</span>
<span class="gr">    AnyRefFrame&amp; ANY_RIGHT_HAND1 = .Handle___2.ANY_RIGHT_HAND1;</span>
<span class="gr">    AnyRefFrame&amp; ANY_RIGHT_HAND2 = .Handle___2.ANY_RIGHT_HAND2;</span>
<span class="gr">    AnyRefFrame&amp; ANY_PELVIS = .MainBase___1.ANY_PELVIS; </span>
    <span class="c1">//LIST OF USER-DEFINED REFERENCE COORDINATE SYSTEMS</span>
  <span class="p">};</span>
</pre></div>
</div>
<p>Now we will create the missing 42 constraints to govern the motion.</p>
<p>We shall prepare this as a separate AnyScript file, which we will name
‘JointsAndDrivers.any’. You can download this file here:
<a class="reference download internal" download="" href="../_downloads/da97c2a6d801eb0b3a13d2d4eb4c57c2/JointsAndDrivers.any"><code class="xref download docutils literal notranslate"><span class="pre">JointsAndDrivers.any</span></code></a>. And put it into
the Model subfolder of your model folder to overwrite. Starting from the bottom
of the human (the top of the file) the constraints applied are as follows:</p>
<ul class="simple">
<li><p>Feet are fixed to the pedals, though with a unilateral force normal to the pedal, since the feet are not “glued” to the pedal.</p></li>
<li><p>Hip abduction is fixed at its initial condition value.</p></li>
<li><p>Pelvis is constrained to the fitness machine with a cylindrical joint along the vertical axis.</p></li>
<li><p>Pelvis thorax angles are driven to their initial condition values.</p></li>
<li><p>Neck rotation angles are driven to their initial condition values.</p></li>
<li><p>The sterno-clavicular joint angles are fixed at their initial condition values (however, if the shoulder rhythm is used, this driver is excluded).</p></li>
<li><p>Glenohumeral abduction is fixed at its initial condition value.</p></li>
<li><p>Hands are fixed to the handles.</p></li>
</ul>
<p>In this JointAndDrivers.any file, you will see that only the connections
at the hands and feet have reaction types set to ‘On’. The other
constraints are just for kinematics, i.e. the voluntary motion, which is
not associated with any reaction forces; this motion is kinetically
produced by the muscles of the human.</p>
<p>Finally, we should remove the supporting reaction forces and moments at
the hip segments because this model now has enough supporting forces
and moments at hands and feet. You can simply just comment out the
“Reactions.any” file as follows:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="p">...</span>
    <span class="kt">AnyFolder</span> <span class="n">ModelEnvironmentConnection</span> <span class="o">=</span> 
    <span class="p">{</span>
      <span class="c1">//&#39;JointsAndDrivers.any&#39; file can include all kinematic constraints such as joints and drivers</span>
      <span class="cp">#include</span> <span class="s">&quot;Model\JointsAndDrivers.any&quot;</span>
      <span class="c1">// Additional reactions which are required to run the inverse dynamics analysis</span>
     <span class="gr"> //#include &quot;Model\Reactions.any&quot;</span>
      <span class="c1">// Include drivers of the fitness machine</span>
      <span class="cp">#include</span> <span class="s">&quot;Model\MachineOperation.any&quot;</span>
    <span class="p">};</span>
<span class="p">...</span>
</pre></div>
</div>
<p>Now you can load the model, and if you run the “InitialConditions” or
the “Kinematics” operation of the AnyBodyStudy object, you will see that
all drivers and constraints are ready for analysis and that the motion
appears reasonable.</p>
<p><img alt="Model view Full Body on Fitnessmachine" src="../_images/lesson3_image4.png" /></p>
<p>The final task is to switch on the muscles of the human body again by
commenting out the body model statements that we introduced in the
beginning of this lesson.</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="s">&quot;../libdef.any&quot;</span>

<span class="n">Main</span> <span class="o">=</span> 
<span class="p">{</span>  

  <span class="c1">// Body Model configuration:</span>
  <span class="cp">#include</span> <span class="s">&quot;Model/BodyModelConfiguration.any&quot;</span>

  <span class="c1">// Using your own Mannequin.any file in the Model folder of your model</span>
  <span class="cp">#include</span> <span class="s">&quot;Model\Mannequin.any&quot;</span>

  <span class="c1">// Switch off all muscles of the body model</span>
  <span class="gr">//#define BM_LEG_MUSCLES_BOTH _MUSCLES_NONE_</span>
<span class="gr">  //#define BM_TRUNK_MUSCLES _MUSCLES_NONE_</span>
<span class="gr">  //#define BM_ARM_MUSCLES_BOTH _MUSCLES_NONE_</span>
  <span class="c1">// Switch of the default drivers</span>
  <span class="cp">#define</span> <span class="x x-Statements">BM_MANNEQUIN_DRIVER_DEFAULT</span> <span class="x x-Options">OFF</span>

  <span class="c1">// Include default human model</span>
  <span class="cp">#include</span> <span class="s">&quot;&lt;ANYBODY_PATH_BODY&gt;\HumanModel.any&quot;</span>
<span class="p">...</span>
</pre></div>
</div>
<p>Now you are ready to run the “InverseDynamics” operation, which should
now run successfully.</p>
<p><img alt="Model view Full Body on Fitnessmachine with muscles" src="../_images/lesson3_image5.png" /></p>
<p>The final version of this model file can be downloaded here:
<a class="reference download internal" download="" href="../_downloads/2db714f743ff88115c4d4026b263f5fe/FitnessMachine_With_Human.zip"><code class="xref download docutils literal notranslate"><span class="pre">‘FitnessMachine\_With\_Human.zip’</span></code></a>.</p>
</section>
</section>


                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="lesson2.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Making the translated AnyScript model move</p>
      </div>
    </a>
    <a class="right-next"
       href="../Scaling/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Scaling and Personalizing your model</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-a-human-model-from-a-main-file-template">Create a human model from a main file template</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#insert-the-fitness-machine-into-the-model">Insert the fitness machine into the model</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#connecting-human-model-and-fitness-machine">Connecting human model and fitness machine</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By AnyBody Technology
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023, AnyBody Technology.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>